(function(_0x11976b,_0x47c479){const _0x4476f5={_0x305c34:0x3cc,_0x597784:0x3b4,_0x35c994:0x3b1,_0x4b3eba:0x136,_0x5b2516:0x13b,_0x5b6c3b:0x12f,_0x4cfd89:0x13e,_0x31e0bf:0x13e,_0x221955:0x13b,_0x12e7f7:0x3bb,_0x3fc50f:0x3c2,_0x52a391:0x3c7,_0x474e69:0x12b,_0x2ebc56:0x131,_0x99ed85:0x3c4,_0x5059bd:0x3be,_0x3f1926:0x3c3,_0x1b86fd:0x3c2,_0x371d71:0x135,_0x448ce9:0x144,_0x57ac7b:0x142,_0x39f586:0x138},_0x14c0c0={_0x2d82bf:0x334};function _0x111f66(_0x138eb3,_0x45e883,_0x33fa46,_0x22afbb){return _0xe54b(_0x45e883-_0x14c0c0._0x2d82bf,_0x138eb3);}const _0x47adc4=_0x11976b();function _0x50ca35(_0x5c1e13,_0x41b1c6,_0x17f6a3,_0x1e42fe){return _0xe54b(_0x1e42fe-0xb0,_0x41b1c6);}while(!![]){try{const _0x3305cc=-parseInt(_0x111f66(_0x4476f5._0x305c34,0x3be,_0x4476f5._0x597784,_0x4476f5._0x35c994))/(-0xdf*-0x3+0x175c+-0x3*0x8a8)+-parseInt(_0x50ca35(_0x4476f5._0x4b3eba,0x127,_0x4476f5._0x5b2516,_0x4476f5._0x5b6c3b))/(0x1ce8+0x14c4+-0x31aa)*(-parseInt(_0x50ca35(0x13e,_0x4476f5._0x4cfd89,_0x4476f5._0x31e0bf,_0x4476f5._0x221955))/(-0x2*-0xae7+0xd39+-0x2304))+-parseInt(_0x111f66(0x3b7,_0x4476f5._0x12e7f7,_0x4476f5._0x3fc50f,_0x4476f5._0x52a391))/(0x92*-0x1f+0xa3*0x34+-0xf6a*0x1)+parseInt(_0x50ca35(_0x4476f5._0x474e69,_0x4476f5._0x2ebc56,0x13b,_0x4476f5._0x4b3eba))/(-0x31*0x53+0x61d*0x5+-0xea9)+parseInt(_0x111f66(0x3c0,_0x4476f5._0x99ed85,_0x4476f5._0x5059bd,_0x4476f5._0x99ed85))/(0xb39+-0x16a8+0xb75)+-parseInt(_0x111f66(0x3cc,_0x4476f5._0x52a391,_0x4476f5._0x3f1926,_0x4476f5._0x1b86fd))/(0x1b*0xf3+0xb5a+0xb*-0x35c)+parseInt(_0x50ca35(_0x4476f5._0x371d71,_0x4476f5._0x448ce9,_0x4476f5._0x57ac7b,_0x4476f5._0x39f586))/(0xe29+-0x1*0x1bfa+0xdd9);if(_0x3305cc===_0x47c479)break;else _0x47adc4['push'](_0x47adc4['shift']());}catch(_0x18fe1f){_0x47adc4['push'](_0x47adc4['shift']());}}}(_0x1650,-0x28c15+0x16e4b+0x3a376));const _0x3f1a95=(function(){const _0x22cf8a={_0x444ad7:0x426,_0x2df8f2:0x434,_0x485a43:0x42e,_0x1c2035:0xe3,_0x1955d1:0xe9,_0x5af124:0xdb,_0x36c184:0x42f,_0x534ab7:0x435},_0x10f3c9={_0x2449f6:0x257,_0x3350cd:0x240,_0x15bba2:0x24b,_0xd18ef6:0x246,_0x15914d:0x244,_0x3e860c:0x23c},_0x19b494={_0x31749b:0x15b,_0x538fc1:0x15a,_0x312df1:0xb4,_0x5b72a2:0xc0,_0x2e0e61:0xb6,_0x289b7e:0xc6,_0x3341e2:0xd2,_0x4a0a3e:0xbe,_0x42f2e2:0xcb,_0x1cd9ba:0x15f,_0x2ec558:0x159,_0x224c9b:0x154,_0x4e052b:0x157,_0x5abc1c:0x152,_0xf2d86f:0x13d,_0x4697ae:0x149,_0x1c8ce8:0xb9,_0x11df76:0xb8,_0x4ca073:0x147,_0x31a89c:0x14e},_0x50b4bb={_0x1f3b58:0x17a},_0x2a2171={_0x24257b:0x3b3},_0x2414e7={};_0x2414e7[_0x2aa985(_0x22cf8a._0x444ad7,_0x22cf8a._0x2df8f2,0x432,_0x22cf8a._0x485a43)]='Gtlqa',_0x2414e7[_0x2fb075(0xd6,_0x22cf8a._0x1c2035,_0x22cf8a._0x1955d1,_0x22cf8a._0x5af124)]=function(_0x463f3d,_0x38644a){return _0x463f3d!==_0x38644a;},_0x2414e7[_0x2aa985(0x433,_0x22cf8a._0x36c184,_0x22cf8a._0x534ab7,0x423)]='OBrMQ';function _0x2aa985(_0x4d9304,_0x48e3bb,_0x3ff468,_0x10f067){return _0xe54b(_0x48e3bb-_0x2a2171._0x24257b,_0x10f067);}const _0x488e0c=_0x2414e7;let _0x1b7674=!![];function _0x2fb075(_0x4773e8,_0x40bed4,_0x5084a2,_0x6c6993){return _0xe54b(_0x40bed4-0x55,_0x5084a2);}return function(_0x4c7d2c,_0x98ea24){const _0x3362e={_0x749cd5:0x61},_0x3e36df={_0x5a7622:0x1da,_0x518a0e:0x67f,_0x40b4ce:0x7e};function _0x1edf58(_0x15ed41,_0x2a8471,_0x291794,_0x5cd109){return _0x2fb075(_0x15ed41-_0x50b4bb._0x1f3b58,_0x291794-0x1af,_0x15ed41,_0x5cd109-0x187);}function _0x1a7d4a(_0x39233f,_0x13049c,_0x4485b0,_0x28a7cf){return _0x2aa985(_0x39233f-_0x3e36df._0x5a7622,_0x4485b0- -_0x3e36df._0x518a0e,_0x4485b0-_0x3e36df._0x40b4ce,_0x13049c);}const _0x32889e={'pHpoR':function(_0x4ade16,_0x1b5782){return _0x4ade16===_0x1b5782;},'znJWZ':_0x488e0c[_0x1a7d4a(-_0x10f3c9._0x2449f6,-_0x10f3c9._0x3350cd,-_0x10f3c9._0x15bba2,-0x24c)],'cgsuV':function(_0x462091,_0x25152e){return _0x488e0c['zPikO'](_0x462091,_0x25152e);},'OUHyL':_0x488e0c['Dknmy'],'oUGFY':_0x1a7d4a(-_0x10f3c9._0xd18ef6,-_0x10f3c9._0x15914d,-0x23f,-_0x10f3c9._0x3e860c)},_0x2ad730=_0x1b7674?function(){const _0x14e92e={_0x5f0126:0xf7,_0x2f196b:0x145};function _0x439c98(_0x1d82dd,_0x382a35,_0x5d0f26,_0x136322){return _0x1a7d4a(_0x1d82dd-0x60,_0x1d82dd,_0x136322-_0x14e92e._0x5f0126,_0x136322-_0x14e92e._0x2f196b);}function _0x320f65(_0x4b81ad,_0x5ec361,_0x1a449a,_0x3326e9){return _0x1a7d4a(_0x4b81ad-_0x3362e._0x749cd5,_0x4b81ad,_0x3326e9-0x305,_0x3326e9-0x125);}if(_0x32889e[_0x439c98(-_0x19b494._0x31749b,-0x154,-0x166,-_0x19b494._0x538fc1)](_0x32889e[_0x320f65(_0x19b494._0x312df1,0xba,_0x19b494._0x5b72a2,_0x19b494._0x2e0e61)],_0x320f65(_0x19b494._0x289b7e,_0x19b494._0x3341e2,_0x19b494._0x4a0a3e,_0x19b494._0x42f2e2)))_0x4e830c=_0x247cf5(_0x240fdf.readFileSync('.version','utf-8'));else{if(_0x98ea24){if(_0x32889e[_0x439c98(-_0x19b494._0x1cd9ba,-_0x19b494._0x2ec558,-_0x19b494._0x224c9b,-_0x19b494._0x4e052b)](_0x32889e[_0x439c98(-_0x19b494._0x5abc1c,-_0x19b494._0xf2d86f,-_0x19b494._0x4e052b,-_0x19b494._0x4697ae)],_0x32889e[_0x320f65(0xbe,_0x19b494._0x1c8ce8,_0x19b494._0x11df76,0xb3)])){const _0x311668=_0x98ea24[_0x439c98(-0x143,-_0x19b494._0x4ca073,-_0x19b494._0x31a89c,-0x146)](_0x4c7d2c,arguments);return _0x98ea24=null,_0x311668;}else{_0x50dc64.log('Не установлен параметр XBOT_API_KEY');return;}}}}:function(){};return _0x1b7674=![],_0x2ad730;};}()),_0x2e175a=_0x3f1a95(this,function(){const _0x3dbe65={_0x2345e6:0x1bd,_0x35c66f:0x1bb,_0x2eaf8f:0x1c9,_0x715c1d:0x1c4,_0x189742:0x1d2,_0x36772a:0x1c5,_0x2d3154:0x2f7,_0x5803cc:0x2f0,_0x44b8b9:0x2f1,_0x20cddf:0x2e6,_0xd17dd1:0x302,_0x26e181:0x302,_0x475ec3:0x2fe,_0x141323:0x1c5,_0x1ed751:0x1ca,_0x32b4c4:0x1be,_0x4e9672:0x2f5,_0x57eed1:0x2e9,_0x3c4e10:0x2f1,_0x11e3dc:0x2f9,_0x42d5bd:0x1c2,_0x25c058:0x1ce,_0x14d67e:0x2fc,_0x808772:0x302},_0x4b13fc={_0x2cc706:0x26e},_0x3c6d17={};function _0x547b77(_0x27d962,_0x33811d,_0x576dd0,_0xd06141){return _0xe54b(_0x576dd0-_0x4b13fc._0x2cc706,_0xd06141);}_0x3c6d17[_0x2bbe40(0x1c5,_0x3dbe65._0x2345e6,_0x3dbe65._0x35c66f,_0x3dbe65._0x2eaf8f)]=_0x2bbe40(_0x3dbe65._0x715c1d,_0x3dbe65._0x189742,0x1c9,_0x3dbe65._0x36772a)+'+$';function _0x2bbe40(_0x28ab4e,_0x634776,_0x2fe195,_0x25367f){return _0xe54b(_0x28ab4e-0x140,_0x2fe195);}const _0x140b6f=_0x3c6d17;return _0x2e175a[_0x547b77(_0x3dbe65._0x2d3154,_0x3dbe65._0x5803cc,_0x3dbe65._0x44b8b9,_0x3dbe65._0x20cddf)]()[_0x547b77(_0x3dbe65._0xd17dd1,0x2f8,_0x3dbe65._0x26e181,_0x3dbe65._0x475ec3)](_0x140b6f[_0x2bbe40(_0x3dbe65._0x141323,_0x3dbe65._0x2345e6,_0x3dbe65._0x1ed751,_0x3dbe65._0x32b4c4)])[_0x547b77(_0x3dbe65._0x4e9672,_0x3dbe65._0x57eed1,_0x3dbe65._0x3c4e10,_0x3dbe65._0x11e3dc)]()[_0x2bbe40(_0x3dbe65._0x42d5bd,_0x3dbe65._0x25c058,0x1c0,_0x3dbe65._0x32b4c4)+'r'](_0x2e175a)[_0x547b77(0x301,_0x3dbe65._0x14d67e,_0x3dbe65._0x808772,_0x3dbe65._0x14d67e)]('(((.+)+)+)'+'+$');});_0x2e175a();const SteamCommunity=require(_0x35a61c(-0x1eb,-0x1f5,-0x1f4,-0x1e8)+'nity'),SteamTotp=require('steam-totp'),moment=require(_0x5f095a(-0x6e,-0x67,-0x71,-0x6e)),SteamUser=require(_0x5f095a(-0x6f,-0x64,-0x69,-0x60)),SteamStore=require('steamstore');const xbsteam=require('./steam');const fs=require('fs');const {execSync}=require('child_process');function _0x5f095a(_0x552eb0,_0x43fef1,_0x87900a,_0x2ce90a){return _0xe54b(_0x87900a- -0xfa,_0x43fef1);}const xbot=require('./xbot');const SteamSession=require('steam-session');const {default:axios}=require('axios');global.sc=new SteamCommunity();global.user=undefined;global.xbsteam=new xbsteam();global.SteamTotp=SteamTotp;function _0xe54b(_0x44477b,_0x2ca987){const _0x130705=_0x1650();return _0xe54b=function(_0x52faef,_0x1b6813){_0x52faef=_0x52faef-(-0x1*-0x177d+-0x10f*0x1c+0x6a1);let _0x37a15d=_0x130705[_0x52faef];if(_0xe54b['crMEHt']===undefined){var _0x28602e=function(_0x348cca){const _0x3380ce='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x368c06='',_0x3e9e1d='',_0x55f4a8=_0x368c06+_0x28602e;for(let _0x4e5b3d=0x1*0x2205+-0x61*-0x32+0x791*-0x7,_0x2c0341,_0x474969,_0x7d391f=0x164b*-0x1+0x1df9+0x1*-0x7ae;_0x474969=_0x348cca['charAt'](_0x7d391f++);~_0x474969&&(_0x2c0341=_0x4e5b3d%(-0x74*-0x2b+0x266d+-0x1*0x39e5)?_0x2c0341*(0x1559+0x1c08+-0x3121)+_0x474969:_0x474969,_0x4e5b3d++%(0x6a*0xa+0x1*0x5b6+-0x9d6))?_0x368c06+=_0x55f4a8['charCodeAt'](_0x7d391f+(-0x141*-0xd+-0x21a5+0x1162))-(-0x1793+-0x81a+0x1fb7)!==-0x88*-0x27+-0x3*-0x184+-0x1944?String['fromCharCode'](0x2322+0x318+0x423*-0x9&_0x2c0341>>(-(0x2707+0xcee*0x2+0x11*-0x3d1)*_0x4e5b3d&-0x96a+0x1d7d+-0x140d)):_0x4e5b3d:-0x1745+0x1a3*-0x1+0x4*0x63a){_0x474969=_0x3380ce['indexOf'](_0x474969);}for(let _0x595b41=0x1ee7+0x1941+0x1*-0x3828,_0x150a95=_0x368c06['length'];_0x595b41<_0x150a95;_0x595b41++){_0x3e9e1d+='%'+('00'+_0x368c06['charCodeAt'](_0x595b41)['toString'](0xaf5+0x39*0x8a+-0x853*0x5))['slice'](-(0x12f4*-0x1+-0x448+0x23*0xaa));}return decodeURIComponent(_0x3e9e1d);};_0xe54b['dRkAaZ']=_0x28602e,_0x44477b=arguments,_0xe54b['crMEHt']=!![];}const _0x35dca3=_0x130705[-0x204f*0x1+-0x17b5+0x3804],_0x297e1b=_0x52faef+_0x35dca3,_0x1e6b27=_0x44477b[_0x297e1b];if(!_0x1e6b27){const _0x1f64ac=function(_0x3019fb){this['mCfpWY']=_0x3019fb,this['EvqkPu']=[0x164c+-0x219b+0xb50,-0x14aa+0x1f*-0x85+-0x24c5*-0x1,-0xf*-0xef+0x1*0x2593+-0x3394],this['kwiLvj']=function(){return'newState';},this['DluocQ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['YxgQPt']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1f64ac['prototype']['QUHEwM']=function(){const _0x2c6c3c=new RegExp(this['DluocQ']+this['YxgQPt']),_0x11cb79=_0x2c6c3c['test'](this['kwiLvj']['toString']())?--this['EvqkPu'][0x11*0x6b+-0x985+0x26b]:--this['EvqkPu'][-0x8aa+0x2*-0xbb5+0x100a*0x2];return this['azXoDe'](_0x11cb79);},_0x1f64ac['prototype']['azXoDe']=function(_0xe4ef60){if(!Boolean(~_0xe4ef60))return _0xe4ef60;return this['KFZjpD'](this['mCfpWY']);},_0x1f64ac['prototype']['KFZjpD']=function(_0x24f0a3){for(let _0x39709e=-0x16f*-0xe+0x1319+-0x272b*0x1,_0x287c27=this['EvqkPu']['length'];_0x39709e<_0x287c27;_0x39709e++){this['EvqkPu']['push'](Math['round'](Math['random']())),_0x287c27=this['EvqkPu']['length'];}return _0x24f0a3(this['EvqkPu'][-0x17f2+0x1c36+-0x444]);},new _0x1f64ac(_0xe54b)['QUHEwM'](),_0x37a15d=_0xe54b['dRkAaZ'](_0x37a15d),_0x44477b[_0x297e1b]=_0x37a15d;}else _0x37a15d=_0x1e6b27;return _0x37a15d;},_0xe54b(_0x44477b,_0x2ca987);}global.sc.wait=async function(timeout=2500){return await new Promise(async(resolve,reject)=>{await new Promise(resolve=>setTimeout(resolve,timeout));resolve();});};global.simpleObjectToMultipartForm=function(obj){let multipartForm={};for(let i in obj){multipartForm[i]={content:obj[i]};}return multipartForm;};console.clear();global.session=new SteamSession.LoginSession(SteamSession.EAuthTokenPlatformType.SteamClient);if(process.env.XBOT_USERNAME===undefined){console.log('Не установлен параметр XBOT_USERNAME');return;}if(process.env.XBOT_PASSWORD===undefined){console.log('Не установлен параметр XBOT_PASSWORD');return;}if(process.env.XBOT_SHARED_SECRET===undefined){console.log('Не установлен параметр XBOT_SHARED_SECRET');return;}if(process.env.XBOT_IDENTITY_SECRET===undefined){console.log('Не установлен параметр XBOT_IDENTITY_SECRET');return;}function _0x1650(){const _0x451b92=['mtC3nZy5mMzUyxD6vW','C2vHCMnO','B1vhrLK','CeHWB1i','rgTUBxK','EM5kv1O','y2DZDvy','nNfPz2jrBq','C3rLyw1JB21TDq','wezQB3y','y29UC3rYDwn0BW','Dg9tDhjPBMC','kcGOlISPkYKRkq','DKfMBxC','nJaZnZe1tvj4shvY','mZC5otK2sfP3rxbA','mZGWnJG5nNLpBKj2qG','Bw9Tzw50','mtqWnZm4zw1RvvvH','mtK2nZfYwxHequC','t1viEuW','wwfewxi','ELbPA08','yxbWBhK','mJmYmJu0v3zxyM1k','C3rLyw0TDxnLCG','wu9MywK'];_0x1650=function(){return _0x451b92;};return _0x1650();}if(process.env.XBOT_API_KEY===undefined){console.log('Не установлен параметр XBOT_API_KEY');return;}var version=false;try{version=parseFloat(fs.readFileSync('.version','utf-8'));}catch{console.log('Файл .version не найден');}global.data={username:process.env.XBOT_USERNAME,password:process.env.XBOT_PASSWORD,sharedSecret:process.env.XBOT_SHARED_SECRET,identitySecret:process.env.XBOT_IDENTITY_SECRET,apiKey:process.env.XBOT_API_KEY,tickDelay:process.env.XBOT_TICK_DELAY??1000,ticks:{sendInventory:process.env.XBOT_TICKS_SEND_INVENTORY??60,sendOrders:process.env.XBOT_TICKS_SEND_ORDERS??60,ping:process.env.XBOT_TICKS_PING??30,checkConfirmations:process.env.XBOT_TICKS_SEND_CONFIRMATION??30,lastHistory:process.env.XBOT_TICKS_LAST_HISTORY??300},useragent:process.env.XBOT_USERAGENT??'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',version:version,startTime:moment.now(),autoupdate:process.env.XBOT_AUTOUPDATE??false};if(process.env.XBOT_URL){process.env['NODE_TLS_REJECT_UNAUTHORIZED']=0;global.xbot_apiurl=process.env.XBOT_URL;}else{global.xbot_apiurl='https://xbot.gg/api/v1/smb/worker/';}global.sc.userAgent=data.userAgent;var loading_lastInc=0;var loading=function(){var h=['|','/','-','\\'];loading_lastInc=loading_lastInc>3?0:loading_lastInc;return h[loading_lastInc++];};global.header=function(tick){console.clear();console.log('['+loading()+'] Account: '+data.username+' | Auth code: '+getSteamGuardCode()+' | Uptime: '+moment.duration(moment.now()-data.startTime).humanize()+' | ver. '+global.data.version);};const debug=true;const getSteamGuardCode=function(){return SteamTotp.getAuthCode(data.sharedSecret);};const cookiesFile=global.data.username+'.auth.json';cookies=[];try{let data=fs.readFileSync(cookiesFile,'utf-8');let json=JSON.parse(data);cookies=json;}catch(err){console.error('Ошибка чтения или парсинга файла:',err);}global.sc.wait();global.sc.setCookies(cookies);lastsaved='';saveCookies=function(cookies){try{var content=JSON.stringify(cookies);fs.writeFileSync(cookiesFile,content);lastsaved=cookies;}catch(err){console.error(err);}};global.log=function log(data){if(debug)console.log(data);};gCookies=null;const login=function(){return new Promise(async(resolve,reject)=>{global.session.on('authenticated',async()=>{console.log('Успешно авторизован в Steam');let cookies=await session.getWebCookies();saveCookies(cookies);global.sc.setCookies(cookies);saveCookies(cookies);loggedIn=true;if(global.xbot===undefined){global.xbot=new xbot();}resolve(session);});global.session.on('timeout',()=>{console.log('This login attempt has timed out.');reject(false);});global.session.on('error',err=>{console.log(`ERROR: This login attempt has failed! ${err.message}`);reject(err);});try{let username=global.data.username;let password=global.data.password;let startResult=await global.session.startWithCredentials({accountName:username,password:password,steamGuardCode:SteamTotp.getAuthCode(data.sharedSecret),agent:global.data.userAgent});if(startResult.actionRequired){let codeActionTypes=[SteamSession.EAuthSessionGuardType.EmailCode,SteamSession.EAuthSessionGuardType.DeviceCode];let codeAction=startResult.validActions.find(action=>codeActionTypes.includes(action.type));}}catch(ex){reject(ex);}});};global.xbot=new xbot();function _0x35a61c(_0x90052,_0x72f4ac,_0x14469b,_0x5926db){const _0x457dc6={_0x2849b2:0x26b};return _0xe54b(_0x90052- -_0x457dc6._0x2849b2,_0x5926db);}async function init(){let tickCounter=0;let loggedIn=await global.xbsteam.amILoggedIn();let toWait=1;while(true){if(global.data.autoupdate==1&&global.data.version!==false){if(tickCounter%300===0||tickCounter===1){console.log('Проверка обновлений бота');await axios.get('https://raw.githubusercontent.com/Autrikektor/xbot-worker/master/.version').then(function(response){console.log('Версия бота в репозитории: '+response.data);var remoteVer=parseFloat(response.data);if(remoteVer>0){if(remoteVer>global.data.version){console.log('Бот обновляется');console.log(execSync('git checkout -f .').toString());console.log(execSync('git pull').toString());console.log(execSync('npm upgrade --force --no-audit').toString());console.log(execSync('npm i --force --no-audit').toString());console.log('Перезапуск');process.exit(0);}else{console.log('Уже установлена последняя версия воркера');}}else{console.log('Ошибка получения обновлений');}});}}if(global.pause429===true){global.xbot.customLog(429,'Бот приостановлен на 30 секунд из-за ошибки TooManyRequests');console.log('Бот приостановлен на 30 секунд из-за ошибки TooManyRequests');await new Promise(resolve=>setTimeout(resolve,1000*30*1));global.pause429=false;}try{global.header(tickCounter);if(tickCounter%300===0&&loggedIn===true){loggedIn=await global.xbsteam.amILoggedIn();console.log('Проверка авторизации Steam: '+(loggedIn?'авторизован':'не авторизован'));}if(!loggedIn){console.log('Попытка авторизации');global.sc.wait();global.sc.wait();toWait=0;await login().then(function(data){loggedIn=true;}).catch(function(err){toWait=1000*60*10;;console.log(err.eresult);if(err.eresult==84){console.log('Лимит попыток авторизации исчерпан, авторизация отлкадывается на 10 минут');toWait=1000*60*10;return;}console.log(err.eresult);loggedIn=false;});await new Promise(resolve=>setTimeout(resolve,toWait));}else{await global.xbot.loop(tickCounter);}}catch(ex){console.log(ex);}tickCounter++;}}init();