(function(_0x202516,_0x599a82){const _0x3baa78={_0x1583d7:0xfc,_0x56ceab:0xfc,_0x5e946b:0x107,_0x362759:0x110,_0x1dcb16:0x10b,_0xaf67fb:0x10c,_0x16f132:0x110,_0x4b6994:0x108,_0x4dfc8e:0x1b4,_0x5aca05:0x1ad,_0x58af60:0x1ae,_0x3f9b5d:0x1a3,_0x16701f:0x1b0,_0x125664:0x1bb,_0x390cfb:0x1b3,_0x50f33b:0x1bd,_0x1a7610:0x1b1,_0x46c7e8:0x1bc,_0x5dd469:0x1a9,_0x2c9c00:0x1a7,_0x421207:0x19e,_0x4d2a78:0xff,_0x2293af:0x100,_0x3a854e:0x104,_0x1f2bec:0xfb,_0x28fa70:0x119,_0x1365d8:0x115,_0x440e2d:0x10e,_0x2cdbae:0x114,_0x5ad1cc:0x10f},_0x49b9d8={_0x231a44:0x81},_0x3b8b10={_0x433cc5:0x339};function _0x4a67a(_0x54b2a0,_0x426fb8,_0x5ccac5,_0x2b49ac){return _0x6743(_0x5ccac5- -_0x3b8b10._0x433cc5,_0x2b49ac);}const _0x2b3f6c=_0x202516();function _0x1d60ec(_0x51e367,_0x4e432a,_0x1b64c4,_0x56d051){return _0x6743(_0x1b64c4- -_0x49b9d8._0x231a44,_0x51e367);}while(!![]){try{const _0x181cfd=-parseInt(_0x1d60ec(_0x3baa78._0x1583d7,_0x3baa78._0x56ceab,_0x3baa78._0x5e946b,_0x3baa78._0x362759))/(0x1be5*-0x1+0x11b2+0xa34)+parseInt(_0x1d60ec(_0x3baa78._0x1dcb16,_0x3baa78._0xaf67fb,_0x3baa78._0x16f132,_0x3baa78._0x4b6994))/(-0x20d5*0x1+0x5*0x3c3+0xe08)+-parseInt(_0x4a67a(-_0x3baa78._0x4dfc8e,-_0x3baa78._0x5aca05,-_0x3baa78._0x58af60,-_0x3baa78._0x3f9b5d))/(0x16ed+-0x161f+0x1d*-0x7)+-parseInt(_0x4a67a(-_0x3baa78._0x16701f,-_0x3baa78._0x125664,-_0x3baa78._0x390cfb,-_0x3baa78._0x50f33b))/(0x5cc+0x3*-0xef+-0x2fb)+-parseInt(_0x4a67a(-_0x3baa78._0x1a7610,-_0x3baa78._0x46c7e8,-0x1b5,-_0x3baa78._0x5dd469))/(0x1*0x1cf1+-0x119b+-0xb51)+-parseInt(_0x4a67a(-_0x3baa78._0x58af60,-0x1ac,-_0x3baa78._0x2c9c00,-_0x3baa78._0x421207))/(0x5f6+0x5*0x5b3+-0x226f)*(-parseInt(_0x1d60ec(_0x3baa78._0x4d2a78,_0x3baa78._0x2293af,_0x3baa78._0x3a854e,_0x3baa78._0x1f2bec))/(0x1d2d+-0x2*-0x7dc+-0x2cde*0x1))+-parseInt(_0x1d60ec(_0x3baa78._0x28fa70,_0x3baa78._0x1365d8,_0x3baa78._0x440e2d,0x11b))/(-0xc89*-0x3+0x1*0x25bb+0x22*-0x237)*(-parseInt(_0x1d60ec(_0x3baa78._0x2cdbae,0x108,_0x3baa78._0x5ad1cc,0x118))/(0x1f75*0x1+-0x3*-0x787+0x7*-0x7b7));if(_0x181cfd===_0x599a82)break;else _0x2b3f6c['push'](_0x2b3f6c['shift']());}catch(_0x6d9ef){_0x2b3f6c['push'](_0x2b3f6c['shift']());}}}(_0x7151,0xdeb1d+0xb6e26+-0x11996a));const _0x1e7094=(function(){const _0x52efbc={_0x10fcbd:0xe6,_0x23dc53:0xe8,_0x5246d1:0xec,_0x585146:0x236,_0x2aff7d:0x237,_0x416bb5:0x236,_0x4202de:0x23f,_0x545534:0xf3,_0xa36a23:0x254,_0x462f67:0x25a,_0x261e37:0x252,_0xdff582:0x24d},_0x1c9b80={_0x17a889:0x172,_0x314fc4:0x17a,_0x285100:0x17b,_0x4e3b5c:0x17c,_0x182562:0x4a0,_0x15299b:0x4a7,_0x128bcf:0x496,_0x368f19:0x4a2,_0x4bcc9d:0x49c,_0x20b777:0x49b,_0x34bc6a:0x49e},_0x2210e4={_0x340b00:0x4c9,_0x53233c:0x4bf,_0x4597f8:0x4be,_0x53a029:0x51,_0x4773e4:0x64,_0x27ec3c:0x53,_0x17b0a8:0x52,_0xa7b1cf:0x48},_0xd7d0c={_0x4f6cb2:0x472,_0x551be7:0x470,_0x51ca9f:0x477},_0x3ccbd9={_0x40d426:0x19,_0x111211:0x7a,_0x2098de:0x261},_0x2b30e1={_0x14a94e:0x137,_0x34d90b:0x1ba},_0x24eb0e={_0x1c7bd6:0xb8},_0x1acb24={_0x3587a3:0x26f},_0xc39e1f={};_0xc39e1f[_0x3953e7(-_0x52efbc._0x10fcbd,-0xdd,-_0x52efbc._0x23dc53,-_0x52efbc._0x5246d1)]=function(_0x1cea99,_0x99ac2a){return _0x1cea99!==_0x99ac2a;};function _0x3953e7(_0x541321,_0x436cea,_0xeafefb,_0xe41f2e){return _0x6743(_0x541321- -_0x1acb24._0x3587a3,_0xe41f2e);}_0xc39e1f[_0x76edde(_0x52efbc._0x585146,_0x52efbc._0x2aff7d,_0x52efbc._0x416bb5,_0x52efbc._0x4202de)]=function(_0x27bd2a,_0x5a7e9b){return _0x27bd2a===_0x5a7e9b;},_0xc39e1f[_0x3953e7(-_0x52efbc._0x5246d1,-_0x52efbc._0x545534,-0xe4,-0xec)]=_0x76edde(_0x52efbc._0xa36a23,_0x52efbc._0x462f67,_0x52efbc._0x261e37,_0x52efbc._0xdff582);const _0x318876=_0xc39e1f;function _0x76edde(_0x4114f9,_0x132e7b,_0x340c15,_0x3545cc){return _0x6743(_0x3545cc-_0x24eb0e._0x1c7bd6,_0x340c15);}let _0x3a8e4b=!![];return function(_0x1692dd,_0x2fb139){const _0x224827={_0x191bed:0x11f,_0x27dd05:0x1f4,_0x19a71e:0x13c};function _0xe3b7fc(_0x5a3595,_0x2e9425,_0x693f8f,_0x236b3e){return _0x76edde(_0x5a3595-_0x2b30e1._0x14a94e,_0x2e9425-_0x2b30e1._0x34d90b,_0x236b3e,_0x5a3595- -0xd3);}function _0x3efa0e(_0x30a1db,_0x164e65,_0x2a5332,_0x45fba8){return _0x76edde(_0x30a1db-_0x3ccbd9._0x40d426,_0x164e65-_0x3ccbd9._0x111211,_0x45fba8,_0x164e65-_0x3ccbd9._0x2098de);}const _0xd9bacf={'aRJTq':function(_0x2c58cf,_0x6f2d7){const _0xd5e3c6={_0x4d41f3:0x2f3};function _0x5c0e31(_0x20592c,_0x475dfd,_0x4c876c,_0x471efc){return _0x6743(_0x20592c-_0xd5e3c6._0x4d41f3,_0x4c876c);}return _0x318876[_0x5c0e31(0x47c,_0xd7d0c._0x4f6cb2,_0xd7d0c._0x551be7,_0xd7d0c._0x51ca9f)](_0x2c58cf,_0x6f2d7);},'ZpoMU':_0xe3b7fc(_0x1c9b80._0x17a889,_0x1c9b80._0x314fc4,_0x1c9b80._0x285100,_0x1c9b80._0x4e3b5c)};if(_0x318876[_0x3efa0e(0x4ad,_0x1c9b80._0x182562,_0x1c9b80._0x15299b,_0x1c9b80._0x128bcf)]('ROFvo',_0x318876[_0x3efa0e(_0x1c9b80._0x368f19,_0x1c9b80._0x4bcc9d,_0x1c9b80._0x20b777,_0x1c9b80._0x34bc6a)])){if(_0xe63be2){const _0xa0f00b=_0x41b9d6['apply'](_0x30f980,arguments);return _0x549e71=null,_0xa0f00b;}}else{const _0xb781d1=_0x3a8e4b?function(){const _0x354494={_0x157746:0x19,_0x5416e5:0x1a4};function _0x3b3986(_0x5baeac,_0x1f76a2,_0x5a9fd3,_0x229bd3){return _0x3efa0e(_0x5baeac-0x1c4,_0x5baeac-_0x354494._0x157746,_0x5a9fd3-_0x354494._0x5416e5,_0x1f76a2);}function _0x5c4465(_0x210444,_0xe679f6,_0x3518d9,_0x499ae6){return _0xe3b7fc(_0x3518d9- -_0x224827._0x191bed,_0xe679f6-_0x224827._0x27dd05,_0x3518d9-_0x224827._0x19a71e,_0x210444);}if(_0xd9bacf['aRJTq'](_0xd9bacf[_0x3b3986(_0x2210e4._0x340b00,_0x2210e4._0x53233c,_0x2210e4._0x4597f8,0x4bd)],_0xd9bacf[_0x5c4465(0x54,_0x2210e4._0x53a029,0x5d,_0x2210e4._0x4773e4)])){_0x300b21.log('Не установлен параметр XBOT_SHARED_SECRET');return;}else{if(_0x2fb139){const _0x5e8372=_0x2fb139[_0x5c4465(_0x2210e4._0x27ec3c,0x4a,_0x2210e4._0x17b0a8,_0x2210e4._0xa7b1cf)](_0x1692dd,arguments);return _0x2fb139=null,_0x5e8372;}}}:function(){};return _0x3a8e4b=![],_0xb781d1;}};}());function _0x4bf368(_0x3f02ed,_0x212f49,_0x3ab79a,_0x10bbf2){const _0xa2429b={_0x42d9cb:0x87};return _0x6743(_0x3f02ed- -_0xa2429b._0x42d9cb,_0x10bbf2);}const _0x1dafe0=_0x1e7094(this,function(){const _0x26ae85={_0x4d5d08:0xf7,_0x111ec3:0xff,_0x29b6a8:0xf5,_0x27faa9:0x353,_0x8a50ac:0x342,_0x32778c:0x347,_0x4bfd5c:0xe7,_0x508637:0xf4,_0x23564a:0xec,_0xdc952f:0xf5,_0x45ac96:0x359,_0x284194:0x34e,_0x517ab9:0x101,_0x114bbc:0xf3,_0x474bd3:0xf4,_0x21e456:0x34f},_0x29d224={};function _0xa1f283(_0xf5f967,_0x26af87,_0x21de3c,_0x2d3910){return _0x6743(_0x21de3c- -0x28f,_0x26af87);}function _0xfd841f(_0x244fb2,_0x5e5bb8,_0x399c46,_0x2b5514){return _0x6743(_0x2b5514-0x1b6,_0x244fb2);}_0x29d224['zhRge']=_0xa1f283(-_0x26ae85._0x4d5d08,-_0x26ae85._0x111ec3,-_0x26ae85._0x29b6a8,-_0x26ae85._0x29b6a8)+'+$';const _0x2638c5=_0x29d224;return _0x1dafe0[_0xfd841f(_0x26ae85._0x27faa9,_0x26ae85._0x8a50ac,_0x26ae85._0x32778c,0x34e)]()[_0xa1f283(-_0x26ae85._0x4d5d08,-_0x26ae85._0x4bfd5c,-_0x26ae85._0x508637,-0xe8)](_0xa1f283(-_0x26ae85._0x4d5d08,-_0x26ae85._0x23564a,-_0x26ae85._0xdc952f,-0xfe)+'+$')[_0xfd841f(0x34b,0x355,_0x26ae85._0x45ac96,_0x26ae85._0x284194)]()[_0xa1f283(-0x100,-0xf9,-0x101,-_0x26ae85._0x517ab9)+'r'](_0x1dafe0)[_0xa1f283(-_0x26ae85._0x114bbc,-_0x26ae85._0x29b6a8,-_0x26ae85._0x474bd3,-0x100)](_0x2638c5[_0xfd841f(_0x26ae85._0x21e456,_0x26ae85._0x27faa9,0x34e,_0x26ae85._0x21e456)]);});_0x1dafe0();const SteamCommunity=require('steamcommu'+'nity'),SteamTotp=require(_0x4bf368(0x10d,0x10d,0x118,0x113)),moment=require(_0x1f2e96(0x47f,0x469,0x47f,0x474)),SteamUser=require(_0x1f2e96(0x468,0x463,0x472,0x46b)),SteamStore=require(_0x4bf368(0x10f,0x102,0x118,0x10f));const xbsteam=require('./steam');const fs=require('fs');const {execSync}=require('child_process');const xbot=require('./xbot');const SteamSession=require('steam-session');const {default:axios}=require('axios');global.sc=new SteamCommunity();global.user=undefined;global.xbsteam=new xbsteam();global.SteamTotp=SteamTotp;global.sc.wait=async function(timeout=2500){return await new Promise(async(resolve,reject)=>{await new Promise(resolve=>setTimeout(resolve,timeout));resolve();});};global.simpleObjectToMultipartForm=function(obj){let multipartForm={};for(let i in obj){multipartForm[i]={content:obj[i]};}return multipartForm;};console.clear();global.session=new SteamSession.LoginSession(SteamSession.EAuthTokenPlatformType.SteamClient);if(process.env.XBOT_USERNAME===undefined){console.log('Не установлен параметр XBOT_USERNAME');return;}if(process.env.XBOT_PASSWORD===undefined){console.log('Не установлен параметр XBOT_PASSWORD');return;}if(process.env.XBOT_SHARED_SECRET===undefined){console.log('Не установлен параметр XBOT_SHARED_SECRET');return;}if(process.env.XBOT_IDENTITY_SECRET===undefined){console.log('Не установлен параметр XBOT_IDENTITY_SECRET');return;}if(process.env.XBOT_API_KEY===undefined){console.log('Не установлен параметр XBOT_API_KEY');return;}var version=false;function _0x1f2e96(_0x2a6495,_0x519ffb,_0x3c4e84,_0x4779c6){return _0x6743(_0x4779c6-0x2e1,_0x3c4e84);}try{version=parseFloat(fs.readFileSync('.version','utf-8'));}catch{console.log('Файл .version не найден');}global.data={username:process.env.XBOT_USERNAME,password:process.env.XBOT_PASSWORD,sharedSecret:process.env.XBOT_SHARED_SECRET,identitySecret:process.env.XBOT_IDENTITY_SECRET,apiKey:process.env.XBOT_API_KEY,tickDelay:process.env.XBOT_TICK_DELAY??1000,ticks:{sendInventory:process.env.XBOT_TICKS_SEND_INVENTORY??60,sendOrders:process.env.XBOT_TICKS_SEND_ORDERS??60,ping:process.env.XBOT_TICKS_PING??30,checkConfirmations:process.env.XBOT_TICKS_SEND_CONFIRMATION??30,lastHistory:process.env.XBOT_TICKS_LAST_HISTORY??300},useragent:process.env.XBOT_USERAGENT??'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',version:version,startTime:moment.now(),autoupdate:process.env.XBOT_AUTOUPDATE??false};if(process.env.XBOT_URL){process.env['NODE_TLS_REJECT_UNAUTHORIZED']=0;global.xbot_apiurl=process.env.XBOT_URL;}else{global.xbot_apiurl='https://xbot.gg/api/v1/smb/worker/';}function _0x6743(_0x26c889,_0x7d6717){const _0x4b4905=_0x7151();return _0x6743=function(_0xc13142,_0x85204a){_0xc13142=_0xc13142-(-0x1b96*0x1+0x14b2+0x867);let _0x46f7e7=_0x4b4905[_0xc13142];if(_0x6743['oqTiaA']===undefined){var _0x377fe0=function(_0x34ec81){const _0x81b271='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x233468='',_0x125fe1='',_0x50a647=_0x233468+_0x377fe0;for(let _0x215914=-0x21c9+-0x939+0x2b02,_0xa93c3b,_0x3d6417,_0x4436cb=-0x1fd3+0x11*0x15d+0xf6*0x9;_0x3d6417=_0x34ec81['charAt'](_0x4436cb++);~_0x3d6417&&(_0xa93c3b=_0x215914%(-0x882*0x4+-0x6*-0x3e6+0xaa8)?_0xa93c3b*(0xdc7+0x2435+-0x31bc)+_0x3d6417:_0x3d6417,_0x215914++%(0x1276+0x9*-0x4a+-0xfd8))?_0x233468+=_0x50a647['charCodeAt'](_0x4436cb+(-0x45f+0xbce+-0x3*0x277))-(0x123*0xd+0x10e+-0xfcb)!==0x125b*-0x2+-0xced*-0x1+0x17c9*0x1?String['fromCharCode'](-0x1a*-0x107+-0x93b*0x1+-0x107c&_0xa93c3b>>(-(-0x1398+-0xd96*0x1+0x1098*0x2)*_0x215914&-0xbe1+0x1613*-0x1+-0x10fd*-0x2)):_0x215914:-0x4a*-0x1+0x3*-0x223+0x61f){_0x3d6417=_0x81b271['indexOf'](_0x3d6417);}for(let _0x324b12=0x11f0+0x97*-0x33+-0x1*-0xc25,_0x45d40b=_0x233468['length'];_0x324b12<_0x45d40b;_0x324b12++){_0x125fe1+='%'+('00'+_0x233468['charCodeAt'](_0x324b12)['toString'](0x215c+-0x1*-0xa75+0x1e7*-0x17))['slice'](-(-0x186a+-0x16d0+0x2f3c));}return decodeURIComponent(_0x125fe1);};_0x6743['IrzJTH']=_0x377fe0,_0x26c889=arguments,_0x6743['oqTiaA']=!![];}const _0x1d0c6d=_0x4b4905[-0x23f1+-0x6fd*-0x2+0x15f7*0x1],_0x4fde11=_0xc13142+_0x1d0c6d,_0x5e6534=_0x26c889[_0x4fde11];if(!_0x5e6534){const _0x4d5496=function(_0x27d611){this['ixpWPR']=_0x27d611,this['NoFiYC']=[-0x1*-0x1196+-0xfe9*-0x2+0x3167*-0x1,-0x1*0x22d5+0x1*0x14ca+-0x5*-0x2cf,-0x3e1*0x9+-0x250c+0x47f5],this['HWKNra']=function(){return'newState';},this['JIuPls']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['LYtvNs']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4d5496['prototype']['jmsbth']=function(){const _0x11bae0=new RegExp(this['JIuPls']+this['LYtvNs']),_0x432c3c=_0x11bae0['test'](this['HWKNra']['toString']())?--this['NoFiYC'][-0x1d43+-0x12a0+0x4*0xbf9]:--this['NoFiYC'][0x1*0x685+-0xc55*-0x2+-0xa65*0x3];return this['QnvpIF'](_0x432c3c);},_0x4d5496['prototype']['QnvpIF']=function(_0x70fa83){if(!Boolean(~_0x70fa83))return _0x70fa83;return this['WWaQUm'](this['ixpWPR']);},_0x4d5496['prototype']['WWaQUm']=function(_0x35bced){for(let _0x4264dc=0x38d+-0x17fd+0x1470,_0x5aef4b=this['NoFiYC']['length'];_0x4264dc<_0x5aef4b;_0x4264dc++){this['NoFiYC']['push'](Math['round'](Math['random']())),_0x5aef4b=this['NoFiYC']['length'];}return _0x35bced(this['NoFiYC'][0x1fe8+-0x4bd*0x7+0x13*0x11]);},new _0x4d5496(_0x6743)['jmsbth'](),_0x46f7e7=_0x6743['IrzJTH'](_0x46f7e7),_0x26c889[_0x4fde11]=_0x46f7e7;}else _0x46f7e7=_0x5e6534;return _0x46f7e7;},_0x6743(_0x26c889,_0x7d6717);}global.sc.userAgent=data.userAgent;var loading_lastInc=0;var loading=function(){var h=['|','/','-','\\'];loading_lastInc=loading_lastInc>3?0:loading_lastInc;return h[loading_lastInc++];};global.header=function(tick){console.clear();console.log('['+loading()+'] Account: '+data.username+' | Auth code: '+getSteamGuardCode()+' | Uptime: '+moment.duration(moment.now()-data.startTime).humanize()+' | ver. '+global.data.version);};const debug=true;function _0x7151(){const _0x4e26a7=['thftAfy','C3rLyw1ZDg9Yzq','wNbVtvu','Dg9tDhjPBMC','EMHsz2u','kcGOlISPkYKRkq','C2vHCMnO','wKfithK','mJa3ndC0nvjUugr5zW','mJe2m3j1Be5MBG','mtKWoteZnMPxshz5Da','B3nPtwW','mJeXmde2CLbuDgjA','zwDkz2C','C3rLyw0TDxnLCG','mtu2mdeYovjLq0TmBG','yxbWBhK','wMjsBfa','y29UC3rYDwn0BW','ndq4meLAwM91tG','mty2ndfsEwzSu3C','mZaYmJa4zxzPEKXb','mtGZndjfD2TlAhK','Bw9Tzw50','C3rLyw0TDg90Ca'];_0x7151=function(){return _0x4e26a7;};return _0x7151();}const getSteamGuardCode=function(){return SteamTotp.getAuthCode(data.sharedSecret);};const cookiesFile=global.data.username+'.auth.json';cookies=[];try{let data=fs.readFileSync(cookiesFile,'utf-8');let json=JSON.parse(data);cookies=json;}catch(err){console.error('Ошибка чтения или парсинга файла:',err);}global.sc.wait();global.sc.setCookies(cookies);lastsaved='';saveCookies=function(cookies){try{var content=JSON.stringify(cookies);fs.writeFileSync(cookiesFile,content);lastsaved=cookies;}catch(err){console.error(err);}};global.log=function log(data){if(debug)console.log(data);};gCookies=null;const login=function(){return new Promise(async(resolve,reject)=>{global.session.on('authenticated',async()=>{console.log('Успешно авторизован в Steam');let cookies=await session.getWebCookies();saveCookies(cookies);global.sc.setCookies(cookies);saveCookies(cookies);loggedIn=true;if(global.xbot===undefined){global.xbot=new xbot();}resolve(session);});global.session.on('timeout',()=>{console.log('This login attempt has timed out.');reject(false);});global.session.on('error',err=>{console.log(`ERROR: This login attempt has failed! ${err.message}`);reject(err);});try{let username=global.data.username;let password=global.data.password;let startResult=await global.session.startWithCredentials({accountName:username,password:password,steamGuardCode:SteamTotp.getAuthCode(data.sharedSecret),agent:global.data.userAgent});if(startResult.actionRequired){let codeActionTypes=[SteamSession.EAuthSessionGuardType.EmailCode,SteamSession.EAuthSessionGuardType.DeviceCode];let codeAction=startResult.validActions.find(action=>codeActionTypes.includes(action.type));}}catch(ex){reject(ex);}});};global.xbot=new xbot();async function init(){let tickCounter=0;let loggedIn=await global.xbsteam.amILoggedIn();let toWait=1;while(true){if(global.data.autoupdate==1&&global.data.version!==false){if(tickCounter%300===0||tickCounter===1){console.log('Проверка обновлений бота');await axios.get('https://raw.githubusercontent.com/Autrikektor/xbot-worker/master/.version').then(function(response){console.log('Версия бота в репозитории: '+response.data);var remoteVer=parseFloat(response.data);if(remoteVer>0){if(remoteVer>global.data.version){console.log('Бот обновляется');console.log(execSync('git checkout -f .').toString());console.log(execSync('git pull').toString());console.log(execSync('npm upgrade --force --no-audit').toString());console.log(execSync('npm i --force --no-audit').toString());console.log('Перезапуск');process.exit(0);}else{console.log('Уже установлена последняя версия воркера');}}else{console.log('Ошибка получения обновлений');}});}}if(global.pause429===true){global.xbot.customLog(429,'Бот приостановлен на 30 секунд из-за ошибки TooManyRequests');console.log('Бот приостановлен на 30 секунд из-за ошибки TooManyRequests');await new Promise(resolve=>setTimeout(resolve,1000*30*1));global.pause429=false;}try{global.header(tickCounter);if(tickCounter%300===0&&loggedIn===true){loggedIn=await global.xbsteam.amILoggedIn();console.log('Проверка авторизации Steam: '+(loggedIn?'авторизован':'не авторизован'));}if(!loggedIn){console.log('Попытка авторизации');global.sc.wait();global.sc.wait();toWait=0;await login().then(function(data){loggedIn=true;}).catch(function(err){toWait=1000*60*10;;console.log(err.eresult);if(err.eresult==84){console.log('Лимит попыток авторизации исчерпан, авторизация отлкадывается на 10 минут');toWait=1000*60*10;return;}console.log(err.eresult);loggedIn=false;});await new Promise(resolve=>setTimeout(resolve,toWait));}else{await global.xbot.loop(tickCounter);}}catch(ex){console.log(ex);}tickCounter++;}}init();