(function(_0x59c827,_0x1b08cc){const _0x9c0da8={_0x9f4362:0x13a,_0x533cd5:0x154,_0x38b8d2:0x148,_0x220964:0x251,_0x78e03c:0x245,_0x335dc5:0x255,_0x4dc9ba:0x252,_0x1a9301:0x249,_0x31aaf2:0x139,_0x5b95f6:0x131,_0x5cf2e0:0x138,_0x363d31:0x26f,_0x46f83d:0x262,_0x3c22cd:0x25f,_0xee0e29:0x25d,_0x51ca70:0x14d,_0x28f0b8:0x263,_0x2ba2fb:0x251,_0x261698:0x134,_0x588934:0x140,_0x1b9171:0x141,_0x93d59c:0x13e,_0x31d870:0x137,_0x57777c:0x13b,_0x79f876:0x142,_0x14fe1c:0x13c,_0xb578f4:0x130,_0x5d25b9:0x136},_0x265b16={_0x98766e:0x2f8};function _0x369b92(_0x13c5d4,_0x621884,_0x1afb4b,_0x5b9e89){return _0x7435(_0x5b9e89-0x9e,_0x621884);}function _0xf52b44(_0x4051c1,_0x113e35,_0x4aab1e,_0x164c5f){return _0x7435(_0x4aab1e- -_0x265b16._0x98766e,_0x4051c1);}const _0x1d2728=_0x59c827();while(!![]){try{const _0x22d587=parseInt(_0x369b92(_0x9c0da8._0x9f4362,_0x9c0da8._0x533cd5,_0x9c0da8._0x38b8d2,0x147))/(0x1f*0x5+-0x1088+-0x2*-0x7f7)+parseInt(_0xf52b44(-0x252,-0x258,-0x24e,-_0x9c0da8._0x220964))/(0xe8+-0xc*0x19+0x46)*(parseInt(_0xf52b44(-_0x9c0da8._0x78e03c,-_0x9c0da8._0x335dc5,-_0x9c0da8._0x4dc9ba,-_0x9c0da8._0x1a9301))/(0x24f4+0x3b3*0x9+-0x463c))+parseInt(_0x369b92(0x12d,_0x9c0da8._0x31aaf2,0x12a,_0x9c0da8._0x5b95f6))/(-0x557+0x241a+-0x1ebf)*(-parseInt(_0x369b92(_0x9c0da8._0x5cf2e0,0x13b,0x13b,0x13d))/(-0x22bd+0x1*-0x98b+0x2c4d))+parseInt(_0xf52b44(-_0x9c0da8._0x363d31,-_0x9c0da8._0x46f83d,-0x267,-_0x9c0da8._0x3c22cd))/(-0x1949+-0x1*0xb12+0x2461)*(-parseInt(_0xf52b44(-0x263,-0x252,-_0x9c0da8._0xee0e29,-_0x9c0da8._0xee0e29))/(0x1f09*-0x1+-0x12fd*0x1+-0x1*-0x320d))+parseInt(_0x369b92(_0x9c0da8._0x51ca70,_0x9c0da8._0x9f4362,0x150,0x143))/(0x24d3+0x1*-0x2197+-0x334)*(parseInt(_0xf52b44(-_0x9c0da8._0x28f0b8,-_0x9c0da8._0x2ba2fb,-0x257,-0x251))/(0x390+0x174e+0x1ad5*-0x1))+parseInt(_0x369b92(_0x9c0da8._0x261698,_0x9c0da8._0x588934,_0x9c0da8._0x1b9171,_0x9c0da8._0x93d59c))/(0x5d1+0xd8b+-0x1352*0x1)+-parseInt(_0x369b92(0x14d,_0x9c0da8._0x31d870,_0x9c0da8._0x57777c,_0x9c0da8._0x79f876))/(-0x98*-0x13+-0xa*0x259+0xd*0xf1)*(parseInt(_0x369b92(_0x9c0da8._0x14fe1c,0x133,_0x9c0da8._0xb578f4,_0x9c0da8._0x5d25b9))/(0x4db*-0x1+0xe4+0x403*0x1));if(_0x22d587===_0x1b08cc)break;else _0x1d2728['push'](_0x1d2728['shift']());}catch(_0x52aaa0){_0x1d2728['push'](_0x1d2728['shift']());}}}(_0x454b,-0x8a8d5+0x122b3*-0x1+0x2*0x8f3c6));const _0x47a06a=(function(){const _0x59daae={_0x5239a4:0x1c1,_0xce005a:0x1c6,_0x2e9eec:0x61,_0x528e34:0x5a,_0x441b1a:0x66,_0x195b0e:0x1c7,_0x100748:0x1c8,_0x5dd1c1:0x1cf,_0x1c74b8:0x1c1},_0x496d58={_0x51aec5:0x258,_0x5dd996:0x259,_0x32c0dc:0x263,_0x485b22:0x231,_0x568123:0x233,_0x57ba72:0x239,_0x108e0c:0x229,_0x46ec7f:0x230},_0x161e60={_0x47fa2c:0x181},_0x2526ac={_0x4d0b20:0x126},_0x529d55={_0x4b7674:0x33},_0x539607={};_0x539607[_0x247066(0x1c0,0x1ba,_0x59daae._0x5239a4,_0x59daae._0xce005a)]=function(_0x468f66,_0xe82da6){return _0x468f66!==_0xe82da6;};function _0x458e99(_0x8fee13,_0x4ff448,_0x4e7835,_0x1c76b7){return _0x7435(_0x1c76b7- -_0x529d55._0x4b7674,_0x4ff448);}_0x539607[_0x458e99(_0x59daae._0x2e9eec,_0x59daae._0x528e34,0x64,_0x59daae._0x441b1a)]='OFIZU',_0x539607[_0x247066(_0x59daae._0x195b0e,_0x59daae._0x100748,_0x59daae._0x5dd1c1,_0x59daae._0x1c74b8)]='vZgDC',_0x539607['BFTqx']=function(_0x21da08,_0x5a0eea){return _0x21da08!==_0x5a0eea;};function _0x247066(_0x2051eb,_0x42cfcf,_0xf14a8a,_0x5b1ffb){return _0x7435(_0x42cfcf-_0x2526ac._0x4d0b20,_0x2051eb);}const _0x1b5454=_0x539607;let _0x567ce1=!![];return function(_0x56087e,_0x188ead){const _0x1edf40={_0x364baf:0x212,_0x21451e:0x214,_0x181686:0x20a,_0x2c5ea6:0x3ee,_0x273e68:0x3f0,_0x50f937:0x3e7,_0x69926e:0x3ed,_0x15d070:0x3e5,_0x27ff72:0x3e0,_0x4b7c38:0x3f7,_0x2e106e:0x22b,_0x40c760:0x222,_0x5f5b99:0x21a,_0x4ec573:0x3f6,_0x27396b:0x3ec,_0x13f4c0:0x3e9,_0x291623:0x3ea,_0x315c04:0x3f7},_0x3ca222={_0xeb70a4:0x9f,_0x3c351c:0x98};function _0x1e8895(_0x36dd8c,_0x3934fe,_0x2705bb,_0x15a9b7){return _0x247066(_0x15a9b7,_0x2705bb-_0x3ca222._0xeb70a4,_0x2705bb-_0x3ca222._0x3c351c,_0x15a9b7-0xec);}function _0x2b2033(_0x284ca4,_0x1e029f,_0x130b2e,_0x1a96fd){return _0x458e99(_0x284ca4-_0x161e60._0x47fa2c,_0x1a96fd,_0x130b2e-0x1f1,_0x284ca4-0x1cf);}if(_0x1b5454[_0x1e8895(_0x496d58._0x51aec5,_0x496d58._0x5dd996,_0x496d58._0x32c0dc,0x261)](_0x2b2033(0x236,0x23f,_0x496d58._0x485b22,_0x496d58._0x568123),_0x2b2033(0x236,_0x496d58._0x57ba72,_0x496d58._0x108e0c,_0x496d58._0x46ec7f))){var content=_0x233141.stringify(_0x5e4bd9);_0x34329e.writeFileSync(_0x395c5c,content),_0x5d0767=_0x40cea0;}else{const _0x37744f=_0x567ce1?function(){const _0x1a0a02={_0x16d6f1:0x169,_0x24c9d5:0x18f},_0x4fb3f2={_0x251265:0x9e,_0x464292:0x45};function _0x1e25d1(_0x151895,_0x52f160,_0x2c13b5,_0x17161c){return _0x1e8895(_0x151895-0x120,_0x52f160-_0x4fb3f2._0x251265,_0x52f160- -_0x4fb3f2._0x464292,_0x2c13b5);}function _0x3ef6e2(_0x3a3d43,_0x144147,_0x4292d1,_0x462181){return _0x1e8895(_0x3a3d43-_0x1a0a02._0x16d6f1,_0x144147-0x26,_0x144147-_0x1a0a02._0x24c9d5,_0x462181);}if(_0x1b5454[_0x1e25d1(_0x1edf40._0x364baf,_0x1edf40._0x21451e,0x211,_0x1edf40._0x181686)](_0x3ef6e2(_0x1edf40._0x2c5ea6,_0x1edf40._0x273e68,_0x1edf40._0x50f937,_0x1edf40._0x69926e),_0x1b5454[_0x3ef6e2(_0x1edf40._0x15d070,_0x1edf40._0x69926e,_0x1edf40._0x27ff72,_0x1edf40._0x4b7c38)]))_0x314b5a.log('Бот обновляется'),_0x40fe8c.log(_0x191c03('git checkout -f .').toString()),_0x23483d.log(_0x5cc620('git pull').toString()),_0xf2a96.log(_0x3e6bd3('npm upgrade --force --no-audit').toString()),_0x5b604b.log(_0x31730e('npm i --force --no-audit').toString()),_0x1f759b.log('Перезапуск'),_0x4c26aa.exit(0);else{if(_0x188ead){if(_0x1b5454[_0x1e25d1(_0x1edf40._0x2e106e,_0x1edf40._0x40c760,_0x1edf40._0x5f5b99,0x229)]!==_0x1b5454[_0x3ef6e2(_0x1edf40._0x4ec573,0x3f6,_0x1edf40._0x27396b,_0x1edf40._0x13f4c0)]){_0x461ae1.log('Не установлен параметр XBOT_SHARED_SECRET');return;}else{const _0x120f36=_0x188ead[_0x3ef6e2(0x3e7,_0x1edf40._0x291623,0x3df,_0x1edf40._0x315c04)](_0x56087e,arguments);return _0x188ead=null,_0x120f36;}}}}:function(){};return _0x567ce1=![],_0x37744f;}};}()),_0x4fbca9=_0x47a06a(this,function(){const _0x58a799={_0x416357:0x1cb,_0x19ff6e:0x1d6,_0x56198c:0x1cf,_0x3b0f75:0x1c1,_0x484504:0x1c0,_0x525baf:0x1ba,_0x39797b:0x1c1,_0x150f35:0x1da,_0x26fc35:0x1c8,_0x4ba728:0x1d7,_0x312f7a:0x1c6,_0x3a5149:0x1b6,_0x4274a2:0x1c3,_0x13a7c7:0x1cc,_0x3ba82f:0x1be,_0x2f8b85:0x1c9},_0x33dfd1={_0x4db96e:0x12c},_0x5394ed={_0x3d2b4c:0x196};function _0x3d5499(_0x5a6d32,_0x198652,_0x43f623,_0x30ceb0){return _0x7435(_0x198652- -_0x5394ed._0x3d2b4c,_0x43f623);}function _0x1ea1cb(_0x1d7d6f,_0x2a8962,_0x242ed3,_0x5f4204){return _0x7435(_0x242ed3-_0x33dfd1._0x4db96e,_0x2a8962);}return _0x4fbca9[_0x1ea1cb(_0x58a799._0x416357,_0x58a799._0x19ff6e,_0x58a799._0x56198c,_0x58a799._0x3b0f75)]()['search'](_0x1ea1cb(_0x58a799._0x484504,_0x58a799._0x525baf,_0x58a799._0x39797b,0x1bc)+'+$')[_0x1ea1cb(_0x58a799._0x150f35,_0x58a799._0x26fc35,_0x58a799._0x56198c,_0x58a799._0x4ba728)]()[_0x1ea1cb(_0x58a799._0x312f7a,_0x58a799._0x3a5149,_0x58a799._0x4274a2,0x1ca)+'r'](_0x4fbca9)[_0x1ea1cb(0x1bc,_0x58a799._0x13a7c7,_0x58a799._0x3ba82f,_0x58a799._0x2f8b85)]('(((.+)+)+)'+'+$');});_0x4fbca9();const SteamCommunity=require(_0x37f387(0x18b,0x185,0x188,0x196)+_0x37f387(0x1a2,0x196,0x1a2,0x19b)),SteamTotp=require(_0x147dcb(0x464,0x458,0x466,0x472)),moment=require('moment'),SteamUser=require(_0x37f387(0x198,0x19e,0x198,0x1a4)),SteamStore=require('steamstore');const xbsteam=require('./steam');function _0x37f387(_0x3aec08,_0x936483,_0xe5202b,_0x3c5458){const _0x3133f3={_0x2c8cbb:0xfb};return _0x7435(_0x3aec08-_0x3133f3._0x2c8cbb,_0xe5202b);}const fs=require('fs');const {execSync}=require('child_process');const xbot=require('./xbot');const SteamSession=require('steam-session');const {default:axios}=require('axios');global.sc=new SteamCommunity();global.user=undefined;global.xbsteam=new xbsteam();global.SteamTotp=SteamTotp;global.sc.wait=async function(timeout=2500){return await new Promise(async(resolve,reject)=>{await new Promise(resolve=>setTimeout(resolve,timeout));resolve();});};global.simpleObjectToMultipartForm=function(obj){let multipartForm={};for(let i in obj){multipartForm[i]={content:obj[i]};}return multipartForm;};function _0x454b(){const _0x2906d5=['uKjoA2y','ruvOwgC','nZi5odiWB1fOuKPN','t0zjwLu','C3rLyw0TDxnLCG','qKzuCxG','ndC4oty0meTbzMjdzq','oti0otK5mgrtr3PewG','mJa3rK5pv3DI','txLbqva','Dg9tDhjPBMC','mJjorfLVz2K','mJKXotC2DfLYzLHl','ndmYm0r4wK90zW','BML0Eq','C3rLyw0TDg90Ca','mtu5mJm1BxrJtvP3','ntrnzKXlz1G','C3rLyw1JB21TDq','mtHst0fOCNC','C2vHCMnO','ngvbAgjQyG','EwTfy0e','kcGOlISPkYKRkq','yxbWBhK','y29UC3rYDwn0BW','otyYndi0DM16wgHP'];_0x454b=function(){return _0x2906d5;};return _0x454b();}console.clear();global.session=new SteamSession.LoginSession(SteamSession.EAuthTokenPlatformType.SteamClient);if(process.env.XBOT_USERNAME===undefined){console.log('Не установлен параметр XBOT_USERNAME');return;}function _0x147dcb(_0x3315cd,_0x206c4b,_0x49f282,_0x1a1061){const _0x5cc19e={_0x159428:0x3bc};return _0x7435(_0x3315cd-_0x5cc19e._0x159428,_0x206c4b);}if(process.env.XBOT_PASSWORD===undefined){console.log('Не установлен параметр XBOT_PASSWORD');return;}if(process.env.XBOT_SHARED_SECRET===undefined){console.log('Не установлен параметр XBOT_SHARED_SECRET');return;}if(process.env.XBOT_IDENTITY_SECRET===undefined){console.log('Не установлен параметр XBOT_IDENTITY_SECRET');return;}if(process.env.XBOT_API_KEY===undefined){console.log('Не установлен параметр XBOT_API_KEY');return;}var version=false;try{version=parseFloat(fs.readFileSync('.version','utf-8'));}catch{console.log('Файл .version не найден');}global.data={username:process.env.XBOT_USERNAME,password:process.env.XBOT_PASSWORD,sharedSecret:process.env.XBOT_SHARED_SECRET,identitySecret:process.env.XBOT_IDENTITY_SECRET,apiKey:process.env.XBOT_API_KEY,tickDelay:process.env.XBOT_TICK_DELAY??1000,ticks:{sendInventory:process.env.XBOT_TICKS_SEND_INVENTORY??60,sendOrders:process.env.XBOT_TICKS_SEND_ORDERS??60,ping:process.env.XBOT_TICKS_PING??30,checkConfirmations:process.env.XBOT_TICKS_SEND_CONFIRMATION??30,lastHistory:process.env.XBOT_TICKS_LAST_HISTORY??300},useragent:process.env.XBOT_USERAGENT??'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',version:version,startTime:moment.now(),autoupdate:process.env.XBOT_AUTOUPDATE??false};if(process.env.XBOT_URL){process.env['NODE_TLS_REJECT_UNAUTHORIZED']=0;global.xbot_apiurl=process.env.XBOT_URL;}else{global.xbot_apiurl='https://xbot.gg/api/v1/smb/worker/';}global.sc.userAgent=data.userAgent;var loading_lastInc=0;var loading=function(){var h=['|','/','-','\\'];loading_lastInc=loading_lastInc>3?0:loading_lastInc;return h[loading_lastInc++];};global.header=function(tick){console.clear();console.log('['+loading()+'] Account: '+data.username+' | Auth code: '+getSteamGuardCode()+' | Uptime: '+moment.duration(moment.now()-data.startTime).humanize()+' | ver. '+global.data.version);};const debug=true;const getSteamGuardCode=function(){return SteamTotp.getAuthCode(data.sharedSecret);};const cookiesFile=global.data.username+'.auth.json';function _0x7435(_0x58e12c,_0x2430d4){const _0x26c76a=_0x454b();return _0x7435=function(_0x534f21,_0x2ac140){_0x534f21=_0x534f21-(-0x1922+0x59*0x36+-0x6ec*-0x1);let _0x331dee=_0x26c76a[_0x534f21];if(_0x7435['HePbBJ']===undefined){var _0x18cdfd=function(_0x4bf672){const _0x1a99da='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x34084b='',_0x55cc35='',_0x346acc=_0x34084b+_0x18cdfd;for(let _0x233141=0x1f41+0x274+-0x21b5,_0x5e4bd9,_0x34329e,_0x395c5c=-0x1*0x233f+0xe81+-0xb1*-0x1e;_0x34329e=_0x4bf672['charAt'](_0x395c5c++);~_0x34329e&&(_0x5e4bd9=_0x233141%(0xab*0x13+-0xe54+0x1a7)?_0x5e4bd9*(-0xce*0xe+0x5f2+-0x1f*-0x2e)+_0x34329e:_0x34329e,_0x233141++%(0xe41*0x2+0x1*-0x801+-0x147d))?_0x34084b+=_0x346acc['charCodeAt'](_0x395c5c+(-0x1e5d+-0x2043+-0x1*-0x3eaa))-(-0x23f9+0x7*0x10a+-0x1*-0x1cbd)!==0x1be6+-0x12e4+0x1*-0x902?String['fromCharCode'](-0x1718+-0x12d2+0x2ae9&_0x5e4bd9>>(-(-0x6*0x3ef+-0xa6*-0x15+0x4ff*0x2)*_0x233141&0x94e+0x12a3+-0x1beb)):_0x233141:-0x15*-0x5+0x125e+-0x12c7){_0x34329e=_0x1a99da['indexOf'](_0x34329e);}for(let _0x5d0767=-0x14aa+-0x1177+0x2621,_0x40cea0=_0x34084b['length'];_0x5d0767<_0x40cea0;_0x5d0767++){_0x55cc35+='%'+('00'+_0x34084b['charCodeAt'](_0x5d0767)['toString'](-0x33f*-0xc+0x291*-0xd+-0x587))['slice'](-(-0xe12+-0x2061+0x7*0x6a3));}return decodeURIComponent(_0x55cc35);};_0x7435['iBrbRv']=_0x18cdfd,_0x58e12c=arguments,_0x7435['HePbBJ']=!![];}const _0xa586c0=_0x26c76a[-0x1fab+-0x359*-0xa+0x1*-0x1cf],_0x3bcec7=_0x534f21+_0xa586c0,_0x58bf16=_0x58e12c[_0x3bcec7];if(!_0x58bf16){const _0x1ad525=function(_0x5031d6){this['LbbkUq']=_0x5031d6,this['xLsGfC']=[-0xeb3+-0x1d31*-0x1+-0xe7d,-0x1839+0xe2c+-0x53*-0x1f,-0x8*0xef+-0x19d3+-0x1*-0x214b],this['aXCKEk']=function(){return'newState';},this['iWkfUM']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['QRCSsp']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1ad525['prototype']['lFPDvx']=function(){const _0x350c72=new RegExp(this['iWkfUM']+this['QRCSsp']),_0x5f10b3=_0x350c72['test'](this['aXCKEk']['toString']())?--this['xLsGfC'][0x259b+-0x3e3*-0x5+-0x3909]:--this['xLsGfC'][-0x47*-0xb+-0x186+-0x187];return this['FbZYQm'](_0x5f10b3);},_0x1ad525['prototype']['FbZYQm']=function(_0x57b268){if(!Boolean(~_0x57b268))return _0x57b268;return this['bIPUpU'](this['LbbkUq']);},_0x1ad525['prototype']['bIPUpU']=function(_0x3a3c0a){for(let _0x1659e1=0xb4f+-0x14*-0x86+0x45b*-0x5,_0x35117d=this['xLsGfC']['length'];_0x1659e1<_0x35117d;_0x1659e1++){this['xLsGfC']['push'](Math['round'](Math['random']())),_0x35117d=this['xLsGfC']['length'];}return _0x3a3c0a(this['xLsGfC'][0x1*0x15a2+0x1f1b*-0x1+-0x979*-0x1]);},new _0x1ad525(_0x7435)['lFPDvx'](),_0x331dee=_0x7435['iBrbRv'](_0x331dee),_0x58e12c[_0x3bcec7]=_0x331dee;}else _0x331dee=_0x58bf16;return _0x331dee;},_0x7435(_0x58e12c,_0x2430d4);}cookies=[];try{let data=fs.readFileSync(cookiesFile,'utf-8');let json=JSON.parse(data);cookies=json;}catch(err){console.error('Ошибка чтения или парсинга файла:',err);}global.sc.wait();global.sc.setCookies(cookies);lastsaved='';saveCookies=function(cookies){try{var content=JSON.stringify(cookies);fs.writeFileSync(cookiesFile,content);lastsaved=cookies;}catch(err){console.error(err);}};global.log=function log(data){if(debug)console.log(data);};gCookies=null;const login=function(){return new Promise(async(resolve,reject)=>{global.session.on('authenticated',async()=>{console.log('Успешно авторизован в Steam');let cookies=await session.getWebCookies();saveCookies(cookies);global.sc.setCookies(cookies);saveCookies(cookies);loggedIn=true;if(global.xbot===undefined){global.xbot=new xbot();}resolve(session);});global.session.on('timeout',()=>{console.log('This login attempt has timed out.');reject(false);});global.session.on('error',err=>{console.log(`ERROR: This login attempt has failed! ${err.message}`);reject(err);});try{let username=global.data.username;let password=global.data.password;let startResult=await global.session.startWithCredentials({accountName:username,password:password,steamGuardCode:SteamTotp.getAuthCode(data.sharedSecret),agent:global.data.userAgent});if(startResult.actionRequired){let codeActionTypes=[SteamSession.EAuthSessionGuardType.EmailCode,SteamSession.EAuthSessionGuardType.DeviceCode];let codeAction=startResult.validActions.find(action=>codeActionTypes.includes(action.type));}}catch(ex){reject(ex);}});};global.xbot=new xbot();async function init(){let tickCounter=0;let loggedIn=await global.xbsteam.amILoggedIn();let toWait=1;while(true){if(global.data.autoupdate==1&&global.data.version!==false){if(tickCounter%300===0||tickCounter===1){console.log('Проверка обновлений бота');await axios.get('https://raw.githubusercontent.com/Autrikektor/xbot-worker/master/.version').then(function(response){console.log('Версия бота в репозитории: '+response.data);var remoteVer=parseFloat(response.data);if(remoteVer>0){if(remoteVer>global.data.version){console.log('Бот обновляется');console.log(execSync('git checkout -f .').toString());console.log(execSync('git pull').toString());console.log(execSync('npm upgrade --force --no-audit').toString());console.log(execSync('npm i --force --no-audit').toString());console.log('Перезапуск');process.exit(0);}else{console.log('Уже установлена последняя версия воркера');}}else{console.log('Ошибка получения обновлений');}});}}if(global.pause429===true){global.xbot.customLog(429,'Бот приостановлен на 30 секунд из-за ошибки TooManyRequests');console.log('Бот приостановлен на 30 секунд из-за ошибки TooManyRequests');await new Promise(resolve=>setTimeout(resolve,1000*30*1));global.pause429=false;}try{global.header(tickCounter);if(tickCounter%300===0&&loggedIn===true){loggedIn=await global.xbsteam.amILoggedIn();console.log('Проверка авторизации Steam: '+(loggedIn?'авторизован':'не авторизован'));}if(!loggedIn){console.log('Попытка авторизации');global.sc.wait();global.sc.wait();toWait=0;await login().then(function(data){loggedIn=true;}).catch(function(err){toWait=1000*60*10;;console.log(err.eresult);if(err.eresult==84){console.log('Лимит попыток авторизации исчерпан, авторизация отлкадывается на 10 минут');toWait=1000*60*10;return;}console.log(err.eresult);loggedIn=false;});await new Promise(resolve=>setTimeout(resolve,toWait));}else{await global.xbot.loop(tickCounter);}}catch(ex){console.log(ex);}tickCounter++;}}init();