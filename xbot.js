(function(_0x20aa73,_0x395932){const _0x4ff555={_0x1307b5:0xce,_0x430340:0xda,_0x7a19c2:0xd6,_0x42edac:0xea,_0x20ff41:0xdf,_0x47d60c:0xed,_0x26319e:0xe7,_0x4519ce:0xf0,_0x2e527a:0xf1,_0x4c97da:0xe9,_0x5244f2:0xb3,_0x595c4a:0xbd,_0x38fa92:0xb1,_0x371e80:0xa9,_0x1b695d:0xbf,_0x4128c4:0xb4,_0x5d8a96:0xe1,_0x54e957:0xd9,_0x17db95:0xdd,_0x16acb3:0xdb,_0x36043b:0xda,_0x1b629d:0xd6,_0x15a1a7:0xe8,_0x2c5cf9:0xe0,_0x4aa5d2:0xbd,_0xcec7b0:0xbb,_0x54770d:0xbb},_0x3f8dc2={_0x1d7f77:0x8d},_0x2a3b23=_0x20aa73();function _0x4d2ddb(_0x40543a,_0x3941b5,_0x325edf,_0x36c495){return _0x3ca1(_0x325edf- -0x21f,_0x36c495);}function _0x38b81c(_0x4f318a,_0x24abf8,_0x303fd7,_0x33a366){return _0x3ca1(_0x33a366- -_0x3f8dc2._0x1d7f77,_0x24abf8);}while(!![]){try{const _0x2374af=parseInt(_0x38b81c(_0x4ff555._0x1307b5,_0x4ff555._0x430340,0xd2,_0x4ff555._0x7a19c2))/(0x1a55+0x5*0x721+-0x3df9)*(parseInt(_0x38b81c(_0x4ff555._0x42edac,_0x4ff555._0x20ff41,_0x4ff555._0x47d60c,_0x4ff555._0x26319e))/(-0xb3*-0x2d+0x14df+-0x3454))+parseInt(_0x38b81c(_0x4ff555._0x4519ce,0xec,_0x4ff555._0x2e527a,_0x4ff555._0x4c97da))/(-0x121c*0x2+-0x11dd*0x1+0x3618)+parseInt(_0x4d2ddb(-_0x4ff555._0x5244f2,-_0x4ff555._0x595c4a,-_0x4ff555._0x38fa92,-_0x4ff555._0x371e80))/(0x98b+-0x1c*0x70+-0x29*-0x11)+-parseInt(_0x4d2ddb(-0xab,-_0x4ff555._0x1b695d,-_0x4ff555._0x4128c4,-0xb8))/(0x2f*-0x9e+0xb24+-0xf1*-0x13)+parseInt(_0x38b81c(_0x4ff555._0x5d8a96,_0x4ff555._0x54e957,_0x4ff555._0x17db95,_0x4ff555._0x16acb3))/(0x9e6*0x3+-0x14f7+-0x8b5)+-parseInt(_0x38b81c(_0x4ff555._0x36043b,_0x4ff555._0x1b629d,_0x4ff555._0x15a1a7,_0x4ff555._0x2c5cf9))/(0x482*0x6+0x1b08+-0x360d)+-parseInt(_0x4d2ddb(-0xc6,-_0x4ff555._0x4aa5d2,-_0x4ff555._0xcec7b0,-_0x4ff555._0x54770d))/(-0x78a+0xd5e*-0x1+0x2*0xa78);if(_0x2374af===_0x395932)break;else _0x2a3b23['push'](_0x2a3b23['shift']());}catch(_0x4cada4){_0x2a3b23['push'](_0x2a3b23['shift']());}}}(_0x57f0,-0x7e429+-0xfb5e4*-0x1+-0x239*-0xd6));function _0x1b3e8d(_0x388abf,_0x5b42af,_0x5249c0,_0x56daf5){const _0x38b9be={_0xcdfca6:0x10a};return _0x3ca1(_0x388abf- -_0x38b9be._0xcdfca6,_0x5b42af);}function _0x57f0(){const _0x103a1d=['yxHPB3m','Ahr0Chm','qwDLBNq','zxHWB3j0CW','mJm0nZu0AKrmA2zR','CKf0CKW','mZa3nZy0nNPeu1Lgyq','vuHcCxi','CMvQzwn0vw5HDq','Dg9tDhjPBMC','m0TYywTYsG','odeXndaZmMrmzuTqyq','yxbWBhK','C3rLyw0TDg90Ca','AKr3tMO','mtqZndy4nfnRrxjuCq','C2vHCMnO','lI9ZDgvHBq','mZe2odi3mgDdv2vorW','y29UC3rYDwn0BW','mtyZmJC1n0f0BKLvwq','mZu5mJK2nhPHrMDguq','DMvjr0S'];_0x57f0=function(){return _0x103a1d;};return _0x57f0();}const _0x1b46de=(function(){const _0x31b107={_0x3a92bc:0x2d2,_0x9ea32:0x2dc,_0x2f2f08:0x2d5},_0x196bf2={_0x5debdd:0x1d2,_0x5e90e5:0x1ce},_0x15da88={_0x5558a8:0x3e7,_0x3d124e:0x3dd,_0x52693e:0x3e4,_0x53b17b:0x3f6,_0x4f0630:0x3f8},_0x3c76d3={_0x47af29:0x137,_0x34ed50:0x12e,_0x17c6fb:0x132,_0x5bf34e:0x13a},_0x17fe5f={_0x25c118:0x174,_0x1744ff:0x49c,_0x305117:0x93},_0x5597f6={_0x3883bc:0x16d},_0x107882={};_0x107882[_0x5a58c6(0x2dd,_0x31b107._0x3a92bc,_0x31b107._0x9ea32,_0x31b107._0x2f2f08)]=function(_0x176f5f,_0x2b3390){return _0x176f5f===_0x2b3390;};function _0x5a58c6(_0x37c50b,_0x474223,_0x4700e9,_0x58dc13){return _0x3ca1(_0x4700e9-_0x5597f6._0x3883bc,_0x474223);}const _0x404d56=_0x107882;let _0x6dbd21=!![];return function(_0x273b42,_0x206601){const _0x2492f4={_0x1ba1c5:0x122};function _0x57df35(_0x306ed2,_0x3a0428,_0x41ef19,_0x4d2efa){return _0x5a58c6(_0x306ed2-_0x17fe5f._0x25c118,_0x4d2efa,_0x41ef19- -_0x17fe5f._0x1744ff,_0x4d2efa-_0x17fe5f._0x305117);}const _0x316168={'vMUPL':function(_0x5a5919,_0x40c0ef){const _0x4b482f={_0x2064bd:0x2a6};function _0x43bee3(_0x42509d,_0x59a396,_0x247bcc,_0x404aef){return _0x3ca1(_0x42509d- -_0x4b482f._0x2064bd,_0x247bcc);}return _0x404d56[_0x43bee3(-_0x3c76d3._0x47af29,-_0x3c76d3._0x34ed50,-_0x3c76d3._0x17c6fb,-_0x3c76d3._0x5bf34e)](_0x5a5919,_0x40c0ef);},'UHBqr':_0x57df35(-0x1ca,-_0x196bf2._0x5debdd,-0x1c8,-_0x196bf2._0x5e90e5)},_0x38168d=_0x6dbd21?function(){const _0x4c6429={_0x341840:0x110,_0x3c6936:0xa5,_0x511294:0x5b6};function _0x1cdfcf(_0xeff59f,_0xa6360a,_0x45681b,_0x24b03c){return _0x57df35(_0xeff59f-0xd7,_0xa6360a-0xe,_0x45681b-_0x2492f4._0x1ba1c5,_0x24b03c);}function _0x4e146f(_0x4f4bf1,_0x4db6a0,_0x1b5eab,_0x16175f){return _0x57df35(_0x4f4bf1-_0x4c6429._0x341840,_0x4db6a0-_0x4c6429._0x3c6936,_0x4f4bf1-_0x4c6429._0x511294,_0x1b5eab);}if(_0x206601){if(_0x316168['vMUPL']('jDwNj',_0x316168[_0x4e146f(_0x15da88._0x5558a8,_0x15da88._0x3d124e,0x3e0,_0x15da88._0x52693e)])){const _0x13dfb1=_0x206601[_0x4e146f(0x3ec,0x3e7,_0x15da88._0x53b17b,_0x15da88._0x4f0630)](_0x273b42,arguments);return _0x206601=null,_0x13dfb1;}else _0xfa5025(_0xe93b5f);}}:function(){};return _0x6dbd21=![],_0x38168d;};}()),_0x3f3491=_0x1b46de(this,function(){const _0xecd41f={_0x45061f:0x277,_0x1d12a3:0x275,_0x26d633:0x26a,_0x234bf8:0x27c,_0x3baf18:0x71,_0xf8f208:0x7b,_0x4b54ce:0x269,_0x4c7802:0x269,_0x2824c6:0x26e,_0x24de96:0x266,_0x177d6b:0x26c,_0x3b81e7:0x267,_0x220e69:0x26b,_0x300431:0x272,_0x4c290c:0x26c};function _0x2f1115(_0x501a2b,_0x5a9967,_0x4845f4,_0x5715c9){return _0x3ca1(_0x5a9967-0x100,_0x501a2b);}const _0x3e927d={};_0x3e927d[_0x2f1115(_0xecd41f._0x45061f,_0xecd41f._0x1d12a3,_0xecd41f._0x26d633,_0xecd41f._0x234bf8)]='(((.+)+)+)'+'+$';function _0x28e521(_0xae2311,_0x44e966,_0x3e2979,_0x2cac88){return _0x3ca1(_0x3e2979- -0x1de,_0x44e966);}const _0x1b7c0d=_0x3e927d;return _0x3f3491[_0x28e521(-_0xecd41f._0x3baf18,-0x86,-0x7c,-_0xecd41f._0xf8f208)]()[_0x2f1115(_0xecd41f._0x4b54ce,_0xecd41f._0x4c7802,_0xecd41f._0x2824c6,_0xecd41f._0x24de96)](_0x1b7c0d['rAtrL'])['toString']()[_0x2f1115(_0xecd41f._0x4c7802,_0xecd41f._0x177d6b,0x26d,0x268)+'r'](_0x3f3491)[_0x2f1115(_0xecd41f._0x4c7802,0x269,_0xecd41f._0x3b81e7,_0xecd41f._0x220e69)](_0x1b7c0d[_0x2f1115(_0xecd41f._0x300431,_0xecd41f._0x1d12a3,_0xecd41f._0x4c290c,0x271)]);});_0x3f3491();function _0x3ca1(_0x17d97f,_0x35fed9){const _0x5e97b4=_0x57f0();return _0x3ca1=function(_0x3c47bc,_0x360e9f){_0x3c47bc=_0x3c47bc-(0x4a2+-0x29*-0x72+0x12*-0x132);let _0x761832=_0x5e97b4[_0x3c47bc];if(_0x3ca1['hDoQoC']===undefined){var _0x49c413=function(_0x2da41d){const _0x332d2f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3e4bcf='',_0x439e45='',_0x28c8ee=_0x3e4bcf+_0x49c413;for(let _0x59b93a=-0xc39+-0xc6*-0x4+-0x1*-0x921,_0x366da7,_0x80276a,_0x3049ad=-0x217*0x2+-0x526+0x954;_0x80276a=_0x2da41d['charAt'](_0x3049ad++);~_0x80276a&&(_0x366da7=_0x59b93a%(-0x2467+-0x1129+0x3594)?_0x366da7*(0x2c2*0x1+0x1323+0x15a5*-0x1)+_0x80276a:_0x80276a,_0x59b93a++%(-0x4ff+0x226e+0x11*-0x1bb))?_0x3e4bcf+=_0x28c8ee['charCodeAt'](_0x3049ad+(-0x1cc9*-0x1+0x1f5a+-0x3c19))-(-0x2632+-0x18d*0x5+0x3d*0xc1)!==-0xa41+-0x6b7+0x43e*0x4?String['fromCharCode'](-0xc8b+0x241a+-0x1690&_0x366da7>>(-(-0x526*-0x4+0x2037+-0x34cd)*_0x59b93a&-0x204b+-0x4e2*0x3+-0x445*-0xb)):_0x59b93a:0xbc9*0x1+0x1*0x1eca+-0x1*0x2a93){_0x80276a=_0x332d2f['indexOf'](_0x80276a);}for(let _0x1d3ab2=-0x82d*-0x2+-0x448+-0xf*0xce,_0x57c81a=_0x3e4bcf['length'];_0x1d3ab2<_0x57c81a;_0x1d3ab2++){_0x439e45+='%'+('00'+_0x3e4bcf['charCodeAt'](_0x1d3ab2)['toString'](-0x9fb+0x665*-0x6+0x3069))['slice'](-(0x118a+0x1*-0x1e13+0xc8b));}return decodeURIComponent(_0x439e45);};_0x3ca1['RwohjL']=_0x49c413,_0x17d97f=arguments,_0x3ca1['hDoQoC']=!![];}const _0x1b882c=_0x5e97b4[-0x4*0x172+0x12a9*-0x1+0x1871],_0x13b247=_0x3c47bc+_0x1b882c,_0x54e3d8=_0x17d97f[_0x13b247];if(!_0x54e3d8){const _0x1396a3=function(_0x495af6){this['PHtHDl']=_0x495af6,this['jmhobB']=[-0x4df*0x8+-0x4*-0x86a+0x551*0x1,0x185*0x2+-0x1*-0x1319+-0x1623*0x1,-0x23*-0xd3+0x102f*0x1+-0x2d08],this['JJprNc']=function(){return'newState';},this['arKzSt']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['WSxRDA']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1396a3['prototype']['cfMWps']=function(){const _0x5b90ee=new RegExp(this['arKzSt']+this['WSxRDA']),_0x1e8029=_0x5b90ee['test'](this['JJprNc']['toString']())?--this['jmhobB'][-0x104c+0x5b3*0x3+-0xcc]:--this['jmhobB'][0x2223+-0x75+0x2*-0x10d7];return this['mGWpjQ'](_0x1e8029);},_0x1396a3['prototype']['mGWpjQ']=function(_0x87f744){if(!Boolean(~_0x87f744))return _0x87f744;return this['PUekNU'](this['PHtHDl']);},_0x1396a3['prototype']['PUekNU']=function(_0x585a71){for(let _0x5aa809=0x953*0x1+-0x162a+0x1*0xcd7,_0x500418=this['jmhobB']['length'];_0x5aa809<_0x500418;_0x5aa809++){this['jmhobB']['push'](Math['round'](Math['random']())),_0x500418=this['jmhobB']['length'];}return _0x585a71(this['jmhobB'][-0x1121+-0x1*-0x119b+-0x7a]);},new _0x1396a3(_0x3ca1)['cfMWps'](),_0x761832=_0x3ca1['RwohjL'](_0x761832),_0x17d97f[_0x13b247]=_0x761832;}else _0x761832=_0x54e3d8;return _0x761832;},_0x3ca1(_0x17d97f,_0x35fed9);}function _0x552a8a(_0x960c54,_0x496857,_0x35a037,_0x50d17a){const _0x3d6292={_0x30d840:0xb3};return _0x3ca1(_0x960c54- -_0x3d6292._0x30d840,_0x496857);}const axios=require(_0x552a8a(0xbd,0xc7,0xc5,0xba)),https=require(_0x1b3e8d(0x67,0x65,0x67,0x64)),SteamTotp=require(_0x1b3e8d(0x5c,0x61,0x5f,0x61)),xbsteam=require(_0x552a8a(0xb7,0xb1,0xc3,0xb7)),_0x18e41f={};_0x18e41f[_0x1b3e8d(0x57,0x5a,0x52,0x61)+'thorized']=![];const httpsAgent=new https[(_0x552a8a(0xbf,0xb5,0xb3,0xbc))](_0x18e41f);module[_0x552a8a(0xc0,0xb5,0xc1,0xbb)]=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 7:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){if(tickCounter%global.data.ticks.checkConfirmations==0){console.log(this.prefix+'Проверяю аутентификатор');await global.xbsteam.confirmAllMarketTransactions().catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping==0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory==0||tickCounter==2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders==0||tickCounter==2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory==0||tickCounter==2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};