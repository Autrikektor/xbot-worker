function _0x1b144f(_0x5c700f,_0x364f6a,_0x23fae0,_0x109ee0){const _0x582cf3={_0x571c40:0x12f};return _0x4e52(_0x5c700f- -_0x582cf3._0x571c40,_0x109ee0);}function _0x3bcd(){const _0x4dc707=['m0Dyuu1irW','DvzZtLK','lI9ZDgvHBq','C2vHCMnO','zK9eA2u','nJaWmdiXENDRrvDr','otmZnJG3n09bu01Ksq','mLb6AfHKCG','mZC4nJa0mgTVEezKqq','mJmZmJy3nKnpEgfXsW','ndbKD1jnu2y','uKvhCKy','mtqZntbxzNP2que','mtK5mdqWnfvxB09vva','Dg9tDhjPBMC','mtq3mZCYyLLvsxvZ','mtbMwhrjDLu','C3rLyw0TDg90Ca','mZa3ogXzwuP6za','ndG0ovjysvDcsa','qwDLBNq','yxbWBhK'];_0x3bcd=function(){return _0x4dc707;};return _0x3bcd();}(function(_0x13a445,_0xb4122b){const _0x214fb3={_0x5564f2:0xe6,_0x586f6d:0xde,_0x505cd1:0xde,_0x1501d4:0xe7,_0x5ba5e1:0x3d,_0x2aae97:0x47,_0x499041:0x42,_0x28eb45:0x49,_0xd65b8a:0xcb,_0x444087:0xd8,_0x10aaad:0xda,_0x5e1d6d:0xda,_0x38b25e:0xe0,_0xc7dc33:0xcf,_0x443bd2:0x50,_0x584919:0x46,_0x37cdc9:0x42,_0x29b3a0:0xd1,_0x2d94bf:0x4d,_0x4315b4:0x42,_0x424e13:0x3e,_0x3a542d:0x46,_0x360c83:0xd9,_0x36ab4b:0xce,_0x10e5b6:0xdb,_0x41dda9:0x39,_0x8f555b:0x4b,_0x34da3d:0x3f,_0x5c7aee:0x3e,_0x24f90a:0x39,_0x38417b:0x3f,_0x179838:0x41,_0x2023fc:0x4f,_0x5750e8:0x46,_0x25e1c9:0xd4,_0x307e71:0xdc,_0x233669:0xca,_0x5de7b6:0xd0},_0x59d376={_0x3d753b:0x119},_0x1133de={_0x2ce988:0x1ae},_0x2984a0=_0x13a445();function _0x4f4bc6(_0x551689,_0x907572,_0x1ea8f1,_0x554ab8){return _0x4e52(_0x907572- -_0x1133de._0x2ce988,_0x1ea8f1);}function _0x1aed08(_0x5a834a,_0x1e4909,_0x589f67,_0x37211f){return _0x4e52(_0x1e4909- -_0x59d376._0x3d753b,_0x5a834a);}while(!![]){try{const _0x18881b=-parseInt(_0x4f4bc6(-_0x214fb3._0x5564f2,-_0x214fb3._0x586f6d,-_0x214fb3._0x505cd1,-_0x214fb3._0x1501d4))/(0x259c+-0x5*-0x3bb+-0x3842*0x1)*(-parseInt(_0x1aed08(-_0x214fb3._0x5ba5e1,-_0x214fb3._0x2aae97,-_0x214fb3._0x499041,-_0x214fb3._0x28eb45))/(-0xea8+-0x13ea+0x114a*0x2))+parseInt(_0x4f4bc6(-_0x214fb3._0xd65b8a,-0xcd,-0xcb,-_0x214fb3._0x444087))/(-0x25eb+0x1*0xc31+0x19bd)*(-parseInt(_0x4f4bc6(-_0x214fb3._0x10aaad,-_0x214fb3._0x5e1d6d,-_0x214fb3._0x38b25e,-_0x214fb3._0xc7dc33))/(-0x1*-0xbe3+0x6*0x1c4+0x51*-0x47))+-parseInt(_0x1aed08(-_0x214fb3._0x443bd2,-_0x214fb3._0x584919,-_0x214fb3._0x37cdc9,-0x4e))/(-0xfb9+0x1015+-0x57*0x1)+-parseInt(_0x4f4bc6(-0xce,-_0x214fb3._0x29b3a0,-_0x214fb3._0x10aaad,-0xca))/(-0x12*0x189+-0x2eb*-0x1+0x18bd)*(parseInt(_0x1aed08(-_0x214fb3._0x2d94bf,-_0x214fb3._0x4315b4,-_0x214fb3._0x424e13,-_0x214fb3._0x3a542d))/(0xc9+-0x887+-0xdd*-0x9))+-parseInt(_0x4f4bc6(-0xce,-_0x214fb3._0x360c83,-_0x214fb3._0x36ab4b,-_0x214fb3._0x10e5b6))/(0x1f*0x74+0x9a3+0x17a7*-0x1)*(parseInt(_0x1aed08(-_0x214fb3._0x41dda9,-0x41,-_0x214fb3._0x8f555b,-0x41))/(-0x1*0x1597+-0x16fc*-0x1+0x3*-0x74))+-parseInt(_0x1aed08(-_0x214fb3._0x34da3d,-_0x214fb3._0x5c7aee,-_0x214fb3._0x24f90a,-_0x214fb3._0x38417b))/(0x4f9*0x3+0x1*0xf67+-0x198*0x13)*(parseInt(_0x1aed08(-_0x214fb3._0x179838,-0x48,-_0x214fb3._0x2023fc,-_0x214fb3._0x5750e8))/(0x2f*0x47+0x209e+0x1*-0x2d9c))+parseInt(_0x4f4bc6(-_0x214fb3._0x36ab4b,-_0x214fb3._0x25e1c9,-_0x214fb3._0x307e71,-_0x214fb3._0x29b3a0))/(-0x2*-0x553+0x2708+0x1*-0x31a2)*(parseInt(_0x4f4bc6(-_0x214fb3._0x233669,-_0x214fb3._0x5de7b6,-0xcd,-0xcb))/(-0x58*-0x6b+-0x25f0+-0x67*-0x3));if(_0x18881b===_0xb4122b)break;else _0x2984a0['push'](_0x2984a0['shift']());}catch(_0x13a3c0){_0x2984a0['push'](_0x2984a0['shift']());}}}(_0x3bcd,0x18b7ee+-0x10a98a+0x8*0x9589));const _0x41b32c=(function(){const _0x4bed09={_0xf6464d:0x1d3,_0x1ac9bc:0x1ca,_0x582d35:0x1d0,_0x3e79cc:0x2cd,_0xd433d1:0x2c5,_0x3c42c9:0x2c7,_0x116552:0x2c1},_0x24c770={_0x3de4c4:0x301,_0x3850a2:0x2ff,_0x38aeb4:0x302},_0x1f68f2={_0x1c9f2d:0x29a},_0x32c26c={};_0x32c26c['REGrF']='fODke';const _0x3bb76a=_0x32c26c;let _0x5a6125=!![];return function(_0x197c22,_0x3fb6c3){function _0x3d4f19(_0x1256fa,_0x2642c2,_0x353da9,_0x3d1bd3){return _0x4e52(_0x2642c2-0x1ef,_0x353da9);}function _0x7900e0(_0x5a11c0,_0x3113f2,_0x128f0b,_0x1de729){return _0x4e52(_0x3113f2- -_0x1f68f2._0x1c9f2d,_0x128f0b);}if(_0x7900e0(-_0x4bed09._0xf6464d,-0x1cb,-_0x4bed09._0x1ac9bc,-_0x4bed09._0x582d35)!==_0x3bb76a[_0x3d4f19(_0x4bed09._0x3e79cc,_0x4bed09._0xd433d1,_0x4bed09._0x3c42c9,_0x4bed09._0x116552)])_0x1bcf7b(_0x14987b.data);else{const _0x3f48e2=_0x5a6125?function(){const _0x2a00e2={_0x160b4c:0x1b3,_0x667451:0xdd};function _0x11f729(_0x260f20,_0xcddaff,_0x39dfa8,_0x348fb8){return _0x7900e0(_0x260f20-_0x2a00e2._0x160b4c,_0x39dfa8- -0x145,_0x348fb8,_0x348fb8-_0x2a00e2._0x667451);}if(_0x3fb6c3){const _0x345aa2=_0x3fb6c3[_0x11f729(-_0x24c770._0x3de4c4,-_0x24c770._0x3de4c4,-_0x24c770._0x3850a2,-_0x24c770._0x38aeb4)](_0x197c22,arguments);return _0x3fb6c3=null,_0x345aa2;}}:function(){};return _0x5a6125=![],_0x3f48e2;}};}()),_0x2b27e7=_0x41b32c(this,function(){const _0x5bfa5b={_0x27789e:0x164,_0x22ed0b:0x161,_0x39140f:0x156,_0x474d7c:0x166,_0x13e23d:0x157,_0x16cffb:0x162,_0x94e52c:0x15e,_0x4b7b47:0x163,_0x5abf9a:0x165,_0x2e67b9:0x161,_0x3e0695:0x160,_0x10f190:0x163,_0xb3b660:0x15e},_0x46fae8={_0x360b25:0x23b},_0x1a3657={_0x3623fb:0x7f},_0x5e8695={};function _0x19c4b1(_0x532be3,_0x3987eb,_0x4e050e,_0x10f255){return _0x4e52(_0x3987eb-_0x1a3657._0x3623fb,_0x10f255);}function _0x14267b(_0x2048e1,_0x2be1d1,_0x59784f,_0x3242cf){return _0x4e52(_0x3242cf- -_0x46fae8._0x360b25,_0x2be1d1);}_0x5e8695[_0x19c4b1(_0x5bfa5b._0x27789e,_0x5bfa5b._0x22ed0b,_0x5bfa5b._0x39140f,0x160)]='(((.+)+)+)'+'+$';const _0x46736f=_0x5e8695;return _0x2b27e7[_0x14267b(-_0x5bfa5b._0x474d7c,-_0x5bfa5b._0x13e23d,-0x16d,-_0x5bfa5b._0x16cffb)]()[_0x19c4b1(_0x5bfa5b._0x94e52c,_0x5bfa5b._0x4b7b47,_0x5bfa5b._0x5abf9a,0x15f)](_0x46736f[_0x19c4b1(0x163,_0x5bfa5b._0x2e67b9,0x158,_0x5bfa5b._0x4b7b47)])['toString']()['constructo'+'r'](_0x2b27e7)[_0x19c4b1(_0x5bfa5b._0x3e0695,_0x5bfa5b._0x10f190,_0x5bfa5b._0xb3b660,_0x5bfa5b._0x3e0695)]('(((.+)+)+)'+'+$');});function _0x274530(_0xdef5e2,_0x4dae28,_0x4c074a,_0x35a2f0){return _0x4e52(_0x35a2f0-0x2ed,_0x4dae28);}_0x2b27e7();function _0x4e52(_0x1bc814,_0x204fac){const _0x17036b=_0x3bcd();return _0x4e52=function(_0x3d84aa,_0x4009f9){_0x3d84aa=_0x3d84aa-(0x2278+0x201c+0x71*-0x95);let _0x34a990=_0x17036b[_0x3d84aa];if(_0x4e52['uhNeMk']===undefined){var _0x53493a=function(_0xe4cc58){const _0x1061e4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x195bcf='',_0x1bcf7b='',_0x14987b=_0x195bcf+_0x53493a;for(let _0x3d2c62=0x1919*0x1+-0xd3f+-0xbda,_0x5ad4ca,_0x31aae8,_0x27bbeb=0x2*0x188+0x2e6+-0x5f6;_0x31aae8=_0xe4cc58['charAt'](_0x27bbeb++);~_0x31aae8&&(_0x5ad4ca=_0x3d2c62%(0x18a9*0x1+-0x2269*-0x1+-0x3b0e)?_0x5ad4ca*(-0x1*-0x18d+-0x335*0x5+0xebc)+_0x31aae8:_0x31aae8,_0x3d2c62++%(-0x1072+-0x7c*-0x23+0x12*-0x7))?_0x195bcf+=_0x14987b['charCodeAt'](_0x27bbeb+(-0xd75+0x25bd+-0xd6*0x1d))-(-0x3*0x4cd+-0xc7*0x2b+-0x22d*-0x16)!==0x1*-0x1f2d+-0x3*-0x1e7+0x14*0x146?String['fromCharCode'](-0x257b+0x1b73*0x1+-0x1*-0xb07&_0x5ad4ca>>(-(-0xb0+0x1dd4+-0x16*0x153)*_0x3d2c62&-0x23fb+0x234b+0x7*0x1a)):_0x3d2c62:0x7*0x224+0x1*0xe8f+-0x1*0x1d8b){_0x31aae8=_0x1061e4['indexOf'](_0x31aae8);}for(let _0x26c62f=0x4*0x243+-0x5fb*0x1+-0x5*0x9d,_0x18ce47=_0x195bcf['length'];_0x26c62f<_0x18ce47;_0x26c62f++){_0x1bcf7b+='%'+('00'+_0x195bcf['charCodeAt'](_0x26c62f)['toString'](-0x7*-0x203+0x116e+-0x1f73))['slice'](-(0x2114+0x1*-0x203e+-0xd4));}return decodeURIComponent(_0x1bcf7b);};_0x4e52['xiWKUD']=_0x53493a,_0x1bc814=arguments,_0x4e52['uhNeMk']=!![];}const _0x4aa378=_0x17036b[-0x87e+0x5f*-0x51+0x268d*0x1],_0x5bb0a6=_0x3d84aa+_0x4aa378,_0x3dcb88=_0x1bc814[_0x5bb0a6];if(!_0x3dcb88){const _0x2b42c5=function(_0xccb849){this['ojHTgN']=_0xccb849,this['BoOsJQ']=[0x166*0xd+0x108e+0x1*-0x22bb,0x26fb+-0x116d*0x1+0x59*-0x3e,-0x5*0x5c9+0xe30+0xebd],this['AdTrIn']=function(){return'newState';},this['ZUbFDz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['vEsCTd']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2b42c5['prototype']['cjxmXE']=function(){const _0xf18870=new RegExp(this['ZUbFDz']+this['vEsCTd']),_0x2337ce=_0xf18870['test'](this['AdTrIn']['toString']())?--this['BoOsJQ'][-0x1626+-0x250f+-0x1*-0x3b36]:--this['BoOsJQ'][0x175b+-0x1*-0x1975+0x8*-0x61a];return this['bDaicT'](_0x2337ce);},_0x2b42c5['prototype']['bDaicT']=function(_0x2884b7){if(!Boolean(~_0x2884b7))return _0x2884b7;return this['zwKVQl'](this['ojHTgN']);},_0x2b42c5['prototype']['zwKVQl']=function(_0x51d6f2){for(let _0x4a1d62=0x165c+-0x377*-0x3+-0x20c1,_0x333208=this['BoOsJQ']['length'];_0x4a1d62<_0x333208;_0x4a1d62++){this['BoOsJQ']['push'](Math['round'](Math['random']())),_0x333208=this['BoOsJQ']['length'];}return _0x51d6f2(this['BoOsJQ'][-0x5c2*-0x4+0x2bb*-0x6+-0x2*0x353]);},new _0x2b42c5(_0x4e52)['cjxmXE'](),_0x34a990=_0x4e52['xiWKUD'](_0x34a990),_0x1bc814[_0x5bb0a6]=_0x34a990;}else _0x34a990=_0x3dcb88;return _0x34a990;},_0x4e52(_0x1bc814,_0x204fac);}const axios=require('axios'),https=require('https'),SteamTotp=require(_0x1b144f(-0x53,-0x4a,-0x4d,-0x4d)),xbsteam=require(_0x1b144f(-0x4c,-0x48,-0x46,-0x4f)),_0x493e80={};_0x493e80['rejectUnau'+'thorized']=![];const httpsAgent=new https[(_0x1b144f(-0x50,-0x4c,-0x57,-0x59))](_0x493e80);module['exports']=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 7:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){if(tickCounter%global.data.ticks.checkConfirmations==0){console.log(this.prefix+'Проверяю аутентификатор');await global.xbsteam.confirmAllMarketTransactions().catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping==0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory==0||tickCounter==2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders==0||tickCounter==2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory==0||tickCounter==2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};