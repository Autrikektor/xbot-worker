function _0x32cf(){const _0xd11bdf=['nZGWvxnyD3zA','vMHKB3K','mtC1oezbrM9WAa','otC1mZaZBMzYq2Pj','yxbWBhK','yxHPB3m','B3vxqwu','DgHVCML6zwq','nZqXodqWuvL3wffU','C3rLyw0TDg90Ca','uvz4uxC','mtGWAMrqCfbJ','Ahr0Chm','mZuYmJCYzwnushv3','t1vTtNm','C2vHCMnO','CMvQzwn0vw5HDq','kcGOlISPkYKRkq','odq0mfPkDvDdqG','mte0ovzPC0XqAa','ntK0wNbyvvPO','lI9ZDgvHBq','mtuXmZmZq013q2Hu','Dg9tDhjPBMC'];_0x32cf=function(){return _0xd11bdf;};return _0x32cf();}function _0x3a14(_0x24bf1a,_0x4fb6f0){const _0x2ae97e=_0x32cf();return _0x3a14=function(_0x29f3e5,_0x983e47){_0x29f3e5=_0x29f3e5-(0x1028+0x1d47+0x2*-0x1618);let _0x27cba9=_0x2ae97e[_0x29f3e5];if(_0x3a14['rHFqgO']===undefined){var _0x2c8fe0=function(_0x4863a7){const _0x848854='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4b2dec='',_0x4f0db0='',_0x5e3fc0=_0x4b2dec+_0x2c8fe0;for(let _0x468065=0x884+0xa*-0x147+-0x221*-0x2,_0x2dc033,_0x430d6f,_0x254b1e=0x2108+0x2*-0xb6d+-0xa2e;_0x430d6f=_0x4863a7['charAt'](_0x254b1e++);~_0x430d6f&&(_0x2dc033=_0x468065%(-0x21d2+0x95b*-0x2+0x348c)?_0x2dc033*(0xb99*0x2+0x68d+0x1*-0x1d7f)+_0x430d6f:_0x430d6f,_0x468065++%(-0x1bdb+0x1aa1+-0x6a*-0x3))?_0x4b2dec+=_0x5e3fc0['charCodeAt'](_0x254b1e+(0x827+0x1028+-0x1845))-(0x25fc+-0x1c6d+-0x985)!==0x673*0x3+0x237c+-0x36d5?String['fromCharCode'](-0x322*0x1+0x649*0x6+0x2195*-0x1&_0x2dc033>>(-(-0x214b*0x1+0x1495*-0x1+0x35e2)*_0x468065&-0x1e92+0x714+-0x35c*-0x7)):_0x468065:-0x7ae*0x2+0xdfd+0x15f){_0x430d6f=_0x848854['indexOf'](_0x430d6f);}for(let _0x17b849=0x1*-0x431+-0x283*0xb+-0x1fd2*-0x1,_0x683de8=_0x4b2dec['length'];_0x17b849<_0x683de8;_0x17b849++){_0x4f0db0+='%'+('00'+_0x4b2dec['charCodeAt'](_0x17b849)['toString'](-0xc25*0x3+-0x1*-0x1872+-0x269*-0x5))['slice'](-(-0x343*0x2+-0xd01+0x683*0x3));}return decodeURIComponent(_0x4f0db0);};_0x3a14['OBkYsr']=_0x2c8fe0,_0x24bf1a=arguments,_0x3a14['rHFqgO']=!![];}const _0x4c0fa6=_0x2ae97e[-0x121*0xf+0x3ed+-0xf*-0xde],_0x5c8cae=_0x29f3e5+_0x4c0fa6,_0x377bd3=_0x24bf1a[_0x5c8cae];if(!_0x377bd3){const _0x4d2f0d=function(_0x3891f5){this['uUZHhZ']=_0x3891f5,this['vmKCuo']=[-0x1bcb+0x1c54+-0x88,0xdaa+0xca*-0x7+-0x4*0x209,-0xfb6+0x60a+0x9ac],this['yMhtDU']=function(){return'newState';},this['xIGjRJ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['MxeyUL']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4d2f0d['prototype']['ZOXvYj']=function(){const _0xcca1c9=new RegExp(this['xIGjRJ']+this['MxeyUL']),_0x3259d9=_0xcca1c9['test'](this['yMhtDU']['toString']())?--this['vmKCuo'][0x1*-0x45+-0xeb7*0x2+-0x76d*-0x4]:--this['vmKCuo'][0x943+0x3ec+-0xe1*0xf];return this['BYlGHR'](_0x3259d9);},_0x4d2f0d['prototype']['BYlGHR']=function(_0x1b2120){if(!Boolean(~_0x1b2120))return _0x1b2120;return this['sdbBZf'](this['uUZHhZ']);},_0x4d2f0d['prototype']['sdbBZf']=function(_0x473b87){for(let _0x54dbe7=0x89b+-0x65*0x35+0xc4e,_0x2a4597=this['vmKCuo']['length'];_0x54dbe7<_0x2a4597;_0x54dbe7++){this['vmKCuo']['push'](Math['round'](Math['random']())),_0x2a4597=this['vmKCuo']['length'];}return _0x473b87(this['vmKCuo'][0x1b6d+0x170a+-0x3277]);},new _0x4d2f0d(_0x3a14)['ZOXvYj'](),_0x27cba9=_0x3a14['OBkYsr'](_0x27cba9),_0x24bf1a[_0x5c8cae]=_0x27cba9;}else _0x27cba9=_0x377bd3;return _0x27cba9;},_0x3a14(_0x24bf1a,_0x4fb6f0);}(function(_0x233220,_0x28e61c){const _0x55fdeb={_0x5d479b:0xe6,_0x2f3cec:0x1a6,_0x4d1f6c:0xec,_0x346f97:0xe7,_0x340886:0xe1,_0x4e23c3:0xef,_0x1bfd08:0xe4,_0x3c24a1:0xe2,_0x3d602d:0xec,_0x264491:0xd1,_0x399f52:0xd7,_0x329da4:0xcf,_0x1dadcc:0xe1,_0x173eb9:0xdd,_0x4ca374:0xe3,_0x1df577:0x19c,_0x52ca01:0xd6,_0x346fae:0xe8,_0x118b04:0xea,_0xb20d24:0xe0,_0x17c7bb:0xd0},_0x2d76d1={_0x5b5956:0x2fa};function _0x474851(_0x1cae8a,_0x549c00,_0x28c467,_0x7f534b){return _0x3a14(_0x549c00- -_0x2d76d1._0x5b5956,_0x7f534b);}const _0x5567b9=_0x233220();function _0x4acc27(_0x5bd095,_0x4fef41,_0x14fe5d,_0x25627c){return _0x3a14(_0x25627c- -0x226,_0x14fe5d);}while(!![]){try{const _0x19f3ad=-parseInt(_0x4acc27(-_0x55fdeb._0x5d479b,-0xd3,-0xe1,-0xde))/(0xae0*-0x1+-0x1*0xfd1+0x1ab2)+parseInt(_0x474851(-0x1a5,-0x1ae,-_0x55fdeb._0x2f3cec,-0x1b0))/(0x1*0x206e+0x78*-0x44+-0x8c)*(parseInt(_0x4acc27(-_0x55fdeb._0x4d1f6c,-0xd8,-_0x55fdeb._0x346f97,-_0x55fdeb._0x340886))/(-0x1*-0x1141+0x17c1+-0x28ff*0x1))+parseInt(_0x4acc27(-0xe4,-_0x55fdeb._0x346f97,-_0x55fdeb._0x4e23c3,-_0x55fdeb._0x346f97))/(-0x1c53+-0x1*0x1189+0x2de0)+-parseInt(_0x4acc27(-_0x55fdeb._0x1bfd08,-_0x55fdeb._0x3c24a1,-_0x55fdeb._0x3d602d,-_0x55fdeb._0x3c24a1))/(0x1*0x1003+0x608+-0x1*0x1606)*(parseInt(_0x4acc27(-_0x55fdeb._0x264491,-_0x55fdeb._0x399f52,-_0x55fdeb._0x329da4,-_0x55fdeb._0x264491))/(-0x6d9+-0x1*0xb47+0x1226))+-parseInt(_0x4acc27(-_0x55fdeb._0x1dadcc,-_0x55fdeb._0x173eb9,-_0x55fdeb._0x4ca374,-0xd9))/(0x2c5*-0x4+0xb*-0x71+-0x1c6*-0x9)+parseInt(_0x474851(-0x1a3,-0x1a8,-0x1ac,-_0x55fdeb._0x1df577))/(0x1*-0x1a03+-0xbaf+0x25ba)+parseInt(_0x4acc27(-_0x55fdeb._0x52ca01,-_0x55fdeb._0x346fae,-_0x55fdeb._0x118b04,-_0x55fdeb._0xb20d24))/(-0x1247*-0x1+0x4a8*0x6+0x2e*-0x101)*(parseInt(_0x4acc27(-_0x55fdeb._0x17c7bb,-0xd0,-0xd2,-0xdc))/(-0x1a3*0xd+0x389+-0x2*-0x8e4));if(_0x19f3ad===_0x28e61c)break;else _0x5567b9['push'](_0x5567b9['shift']());}catch(_0x271a98){_0x5567b9['push'](_0x5567b9['shift']());}}}(_0x32cf,-0x3e655+0x2185a+0xed*0x4f0));function _0x13d4cd(_0x13fa16,_0x378e66,_0x188cac,_0x4b82f4){const _0x3d2824={_0x8fba98:0x173};return _0x3a14(_0x378e66-_0x3d2824._0x8fba98,_0x4b82f4);}const _0x3770aa=(function(){const _0x4aceee={_0x4b0815:0x74,_0x4be563:0x7d,_0x199ca7:0x68},_0x568117={_0x3656fa:0x376,_0xb22ef2:0x372,_0x5f24d9:0x36a,_0xd25f39:0x371},_0x479a25={_0x48a652:0x1bf},_0x44ab38={};_0x44ab38['rlKtE']=function(_0x1fad2f,_0x910493){return _0x1fad2f===_0x910493;},_0x44ab38['QVxQw']=_0x2c0e7a(-_0x4aceee._0x4b0815,-_0x4aceee._0x4be563,-_0x4aceee._0x199ca7,-0x69);function _0x2c0e7a(_0x2677ed,_0x31a77b,_0x21a286,_0x1e1712){return _0x3a14(_0x2677ed- -_0x479a25._0x48a652,_0x31a77b);}const _0x38fd1e=_0x44ab38;let _0x55d230=!![];return function(_0xa5d9fd,_0x305721){const _0x46abf2={_0x4dd546:0x505,_0x2835a0:0x509,_0x10b4b3:0x4fb,_0x3fcd7c:0x4fe,_0x4440c7:0x158,_0x347ee6:0x169,_0x27b480:0x15e,_0x280365:0x166,_0x570169:0x506,_0x5872a6:0x4f9,_0x168fa3:0x4fb,_0x5e5b7a:0x4fc},_0xc98c1f={_0x63c60e:0x184,_0xbadbf6:0x1bd},_0x30d71a={_0x5c8610:0x3dc,_0xa57702:0xcc},_0xc8a884={'ouWAe':function(_0x5bb893,_0x3db4d3){return _0x38fd1e['rlKtE'](_0x5bb893,_0x3db4d3);},'OUmNs':_0x38fd1e[_0x4efdbc(_0x568117._0x3656fa,_0x568117._0xb22ef2,_0x568117._0x5f24d9,_0x568117._0xd25f39)]};function _0x4efdbc(_0x23dda2,_0xe861ea,_0x4f51df,_0x25ac77){return _0x2c0e7a(_0x25ac77-_0x30d71a._0x5c8610,_0xe861ea,_0x4f51df-0x124,_0x25ac77-_0x30d71a._0xa57702);}const _0x582d60=_0x55d230?function(){const _0x1b09da={_0x70f5da:0x2f,_0x3044a9:0x19d,_0x1005d8:0x20a};function _0x336ac9(_0x4fe89d,_0x37d7c6,_0x551f0b,_0x1398a1){return _0x4efdbc(_0x4fe89d-_0xc98c1f._0x63c60e,_0x4fe89d,_0x551f0b-_0xc98c1f._0xbadbf6,_0x1398a1-0x191);}function _0x51731e(_0x5c2421,_0x217cde,_0x246f46,_0x208537){return _0x4efdbc(_0x5c2421-_0x1b09da._0x70f5da,_0x5c2421,_0x246f46-_0x1b09da._0x3044a9,_0x246f46- -_0x1b09da._0x1005d8);}if(_0xc8a884[_0x336ac9(_0x46abf2._0x4dd546,_0x46abf2._0x2835a0,_0x46abf2._0x10b4b3,_0x46abf2._0x3fcd7c)](_0xc8a884[_0x336ac9(0x4e4,0x4e3,0x4e2,0x4ee)],_0x51731e(_0x46abf2._0x4440c7,_0x46abf2._0x347ee6,_0x46abf2._0x27b480,_0x46abf2._0x280365))){if(_0x305721){const _0x3e15eb=_0x305721[_0x336ac9(_0x46abf2._0x570169,_0x46abf2._0x5872a6,_0x46abf2._0x168fa3,_0x46abf2._0x5e5b7a)](_0xa5d9fd,arguments);return _0x305721=null,_0x3e15eb;}}else _0x5b3e06(_0x8d69ff),_0x5d0d0d.error('Error:',_0x11e5fa.response.data);}:function(){};return _0x55d230=![],_0x582d60;};}()),_0x216848=_0x3770aa(this,function(){const _0x39d300={_0x522c27:0x1ac,_0x2d92bd:0x19d,_0x4299cb:0x1b2,_0x1afee3:0x1a9,_0x2735f4:0x76,_0xc9973a:0x19a,_0x13b1c6:0x1a1,_0x5c5955:0x73,_0x5f0b3d:0x6a},_0x255d42={_0x486f35:0x1b4},_0x133404={_0x41c96a:0x2ea};function _0x174ccd(_0x33dbe0,_0x5becc4,_0x2fd687,_0xa4b4d1){return _0x3a14(_0xa4b4d1- -_0x133404._0x41c96a,_0x2fd687);}function _0x2a3387(_0x215044,_0x5d58ac,_0x432cb1,_0x202a7a){return _0x3a14(_0x432cb1- -_0x255d42._0x486f35,_0x5d58ac);}return _0x216848['toString']()[_0x174ccd(-_0x39d300._0x522c27,-_0x39d300._0x2d92bd,-_0x39d300._0x4299cb,-_0x39d300._0x1afee3)](_0x2a3387(-0x6b,-_0x39d300._0x2735f4,-0x71,-0x79)+'+$')[_0x174ccd(-_0x39d300._0xc9973a,-0x1a3,-0x1ab,-_0x39d300._0x13b1c6)]()['constructo'+'r'](_0x216848)[_0x2a3387(-0x74,-0x7e,-_0x39d300._0x5c5955,-_0x39d300._0x5f0b3d)]('(((.+)+)+)'+'+$');});_0x216848();function _0x40be94(_0x3edea7,_0x3f36e9,_0x5bbc5b,_0x25e172){const _0x36f1be={_0xa553ed:0x3b3};return _0x3a14(_0x5bbc5b- -_0x36f1be._0xa553ed,_0x3f36e9);}const axios=require(_0x13d4cd(0x2ca,0x2c2,0x2c3,0x2c7)),https=require(_0x40be94(-0x268,-0x255,-0x25d,-0x253)),SteamTotp=require(_0x40be94(-0x257,-0x264,-0x260,-0x259)),xbsteam=require(_0x13d4cd(0x2c2,0x2ba,0x2b5,0x2bb)),_0x11db9b={};_0x11db9b[_0x40be94(-0x269,-0x267,-0x271,-0x26f)+_0x13d4cd(0x2cf,0x2c4,0x2c1,0x2cd)]=![];const httpsAgent=new https['Agent'](_0x11db9b);module['exports']=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 7:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){console.log('Выставляю');try{let aabsbas=await global.xbsteam.createBuyOrder(1,252490,'Ammo Supply Container',81,2,'',0).catch(function(e){console.log(e);}).then(function(a){console.log(a);});}catch(ex){console.log(ex);}console.log('END');await global.sc.wait();await global.sc.wait();await global.sc.wait();resolve();return;if(tickCounter%global.data.ticks.checkConfirmations==0){console.log(this.prefix+'Проверяю аутентификатор');await global.xbsteam.confirmAllMarketTransactions().catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping==0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory==0||tickCounter==2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders==0||tickCounter==2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory==0||tickCounter==2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};