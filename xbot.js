function _0x7a3d(){const _0x32720e=['yxbWBhK','C3rLyw0TDg90Ca','mZfxAKTTtM4','y29UC3rYDwn0BW','Dg9tDhjPBMC','yxHPB3m','EvHoEhK','uwPNvuC','C2vHCMnO','z054B1K','lI9ZDgvHBq','wMv3C00','nZi2mdjkv25kz0e','mtq3ndaZourlqMDMAa','qwDLBNq','mZmYmdqXofHuC0zxAq','otqXoty3mLbLCMzXtq','EKPizvO','D2j2uvq','zxHWB3j0CW','mtGZmdG0mJfIwwTWAKO','kcGOlISPkYKRkq','ndeWnJa1nNbwDNLxwq','nJu3odi4nvrcqKjwAW','nM9qqwnIua'];_0x7a3d=function(){return _0x32720e;};return _0x7a3d();}(function(_0x16ee7e,_0x3c08bb){const _0x501701={_0xaecd9a:0x3b,_0x2eb922:0x31,_0x59a1ac:0x39,_0x504f0b:0x3b,_0x30d3de:0x2f,_0x290588:0x25,_0x43efb6:0x38,_0xd9c8e4:0x122,_0x267da3:0x49,_0x315295:0x3d,_0x4cd644:0x3c,_0x16e127:0x3f,_0x37201d:0x46,_0x5c2adb:0x3c,_0x5e7b68:0x10a,_0x4a0aec:0x111,_0xe73d54:0x104,_0x48e0f9:0x127,_0x39839a:0x11e,_0x297fe4:0x11b},_0x771c47={_0x1207e8:0x198},_0x512712={_0x260ca7:0x276},_0x5700fc=_0x16ee7e();function _0x1fadec(_0x53eee6,_0x23ed3d,_0x367253,_0x1210bf){return _0x11b2(_0x23ed3d- -_0x512712._0x260ca7,_0x367253);}function _0x4372bf(_0x3d3cc3,_0x128511,_0x46899b,_0x21927f){return _0x11b2(_0x21927f- -_0x771c47._0x1207e8,_0x46899b);}while(!![]){try{const _0x49af24=parseInt(_0x4372bf(-_0x501701._0xaecd9a,-_0x501701._0x2eb922,-_0x501701._0xaecd9a,-_0x501701._0x59a1ac))/(0xf4e+0xdf6*0x1+0x3*-0x9c1)*(parseInt(_0x4372bf(-0x26,-_0x501701._0x504f0b,-_0x501701._0x504f0b,-_0x501701._0x30d3de))/(0x68+0x2*-0x599+0x2b3*0x4))+-parseInt(_0x4372bf(-_0x501701._0x290588,-_0x501701._0x290588,-_0x501701._0x43efb6,-0x2c))/(0xe2*-0x15+0x14fc+-0x26f)+-parseInt(_0x1fadec(-_0x501701._0xd9c8e4,-0x11c,-0x120,-0x123))/(-0x3*0x998+0xd9+-0x9*-0x31b)+parseInt(_0x4372bf(-0x32,-0x33,-_0x501701._0x267da3,-_0x501701._0x315295))/(0x54*0x25+-0x23d1+0x17b2)*(parseInt(_0x4372bf(-_0x501701._0x4cd644,-_0x501701._0x16e127,-_0x501701._0x37201d,-_0x501701._0x5c2adb))/(0x1*-0x11a7+-0x1a8+0x1355))+-parseInt(_0x1fadec(-0x10d,-0x10c,-_0x501701._0x5e7b68,-0x10e))/(-0x137*0x17+-0x6f1+0x22e9)+-parseInt(_0x1fadec(-_0x501701._0x4a0aec,-0x109,-_0x501701._0xe73d54,-0x106))/(-0x123a+-0xae*0x15+0x2088)+parseInt(_0x1fadec(-_0x501701._0x48e0f9,-_0x501701._0x39839a,-_0x501701._0x4a0aec,-_0x501701._0x297fe4))/(-0x233f*0x1+0x994*-0x2+0x3670);if(_0x49af24===_0x3c08bb)break;else _0x5700fc['push'](_0x5700fc['shift']());}catch(_0x2dbbaf){_0x5700fc['push'](_0x5700fc['shift']());}}}(_0x7a3d,0x7cd8b+0x1*-0x7ab4f+0xe6bf1));const _0x34e9ce=(function(){const _0xfe9100={_0x25fb51:0xf8,_0x47b01c:0xfa,_0x40ac03:0x10b,_0x561c5f:0x106,_0x1ee294:0x10d,_0x2eb3d0:0x105,_0x557a00:0x107,_0x30952a:0xfe,_0x17e142:0xfd,_0x37007d:0xf1},_0x1a4883={_0x4a965c:0x193,_0x41aead:0x198,_0x4d3450:0x199},_0x4e57c4={_0x4fbb8c:0x9c,_0x422aae:0xa0,_0x28e539:0x91,_0x2d733e:0xa8,_0x5f35f4:0x296,_0x43e229:0x296,_0x2fd9f5:0x28c,_0x3bb42c:0x297,_0x27ffd7:0x28f,_0x7f021b:0x272,_0x20654e:0x27a},_0x3fedda={_0x3e80e8:0x95,_0x786d3b:0xe7,_0x25380b:0x1b5},_0x319f21={_0xf40086:0x189},_0x2dd8b4={};_0x2dd8b4[_0x51850d(_0xfe9100._0x25fb51,_0xfe9100._0x47b01c,0xfb,0xf8)]=function(_0x2a4c69,_0x3cb70e){return _0x2a4c69===_0x3cb70e;},_0x2dd8b4[_0x51850d(_0xfe9100._0x40ac03,_0xfe9100._0x561c5f,_0xfe9100._0x47b01c,_0xfe9100._0x1ee294)]=_0x51850d(0xff,_0xfe9100._0x2eb3d0,_0xfe9100._0x557a00,_0xfe9100._0x30952a),_0x2dd8b4['shvZZ']=function(_0x25d0cd,_0x2e0a0d){return _0x25d0cd===_0x2e0a0d;};function _0x51850d(_0x1983de,_0x167d84,_0x4dde75,_0x33223b){return _0x11b2(_0x167d84- -0x69,_0x1983de);}_0x2dd8b4['QjgUG']=_0x51850d(0x105,_0xfe9100._0x17e142,0xf7,_0xfe9100._0x37007d);function _0x3ba334(_0x3bb053,_0x1555f2,_0x162baf,_0x260167){return _0x11b2(_0x3bb053- -_0x319f21._0xf40086,_0x162baf);}const _0xb123b9=_0x2dd8b4;let _0x26de5c=!![];return function(_0x3257e7,_0x13bf6a){const _0x465258={_0x5d8e64:0x12f,_0x651681:0x117,_0x3837dd:0xf1};function _0x366ca4(_0x14a3b1,_0x3b84fe,_0x12ece7,_0x52723f){return _0x51850d(_0x52723f,_0x12ece7-_0x3fedda._0x3e80e8,_0x12ece7-_0x3fedda._0x786d3b,_0x52723f-_0x3fedda._0x25380b);}if(_0xb123b9['shvZZ'](_0xb123b9[_0x366ca4(_0x1a4883._0x4a965c,_0x1a4883._0x41aead,0x190,_0x1a4883._0x4d3450)],'uyIgI'))_0x40cb40.error(_0x53ea36);else{const _0xc956df=_0x26de5c?function(){const _0x47df06={_0x5a0dd3:0x180,_0x57cab1:0x163};function _0x1a667d(_0xc6d121,_0x223f92,_0x33ecba,_0x8305f2){return _0x366ca4(_0xc6d121-_0x47df06._0x5a0dd3,_0x223f92-_0x47df06._0x57cab1,_0xc6d121- -0x22b,_0x223f92);}function _0x304396(_0x4a678c,_0x1f6cfa,_0x3345c9,_0x4e23a2){return _0x366ca4(_0x4a678c-_0x465258._0x5d8e64,_0x1f6cfa-_0x465258._0x651681,_0x4e23a2-_0x465258._0x3837dd,_0x4a678c);}if(_0x13bf6a){if(_0xb123b9[_0x1a667d(-_0x4e57c4._0x4fbb8c,-_0x4e57c4._0x422aae,-_0x4e57c4._0x28e539,-_0x4e57c4._0x2d733e)](_0xb123b9[_0x304396(_0x4e57c4._0x5f35f4,0x288,_0x4e57c4._0x43e229,_0x4e57c4._0x2fd9f5)],_0x304396(_0x4e57c4._0x3bb42c,_0x4e57c4._0x2fd9f5,_0x4e57c4._0x27ffd7,0x28b))){const _0x15d49a=_0x13bf6a[_0x304396(0x275,0x27e,_0x4e57c4._0x7f021b,_0x4e57c4._0x20654e)](_0x3257e7,arguments);return _0x13bf6a=null,_0x15d49a;}else _0x3c1807(_0x358465),_0x1a7309.error('Error:',_0x384a37.response.data);}}:function(){};return _0x26de5c=![],_0xc956df;}};}()),_0x394380=_0x34e9ce(this,function(){const _0x112121={_0x3c6b86:0x210,_0x3d36c9:0x210,_0x2c31df:0x21d,_0x937398:0x21c,_0x1b9a41:0x218,_0x4a3c7a:0x211,_0x4d91c2:0x216,_0x220d07:0x213,_0x180d3b:0x1e9,_0x4fdace:0x1fa,_0x3d4273:0x1f6},_0x471576={_0x3fa87e:0x8e},_0x55b61f={};function _0x37f10c(_0x38b906,_0x34dfa6,_0x47fdad,_0x44509e){return _0x11b2(_0x44509e- -0x376,_0x34dfa6);}_0x55b61f['ZewsM']=_0x37f10c(-0x224,-_0x112121._0x3c6b86,-_0x112121._0x3d36c9,-_0x112121._0x2c31df)+'+$';const _0x3fab9b=_0x55b61f;function _0x268e2f(_0x136775,_0x278fb4,_0x2c7873,_0x223a0b){return _0x11b2(_0x223a0b-_0x471576._0x3fa87e,_0x278fb4);}return _0x394380[_0x37f10c(-0x20b,-_0x112121._0x937398,-0x217,-0x215)]()[_0x37f10c(-_0x112121._0x1b9a41,-0x21d,-0x214,-_0x112121._0x4a3c7a)](_0x37f10c(-0x21d,-0x21d,-_0x112121._0x4d91c2,-0x21d)+'+$')['toString']()[_0x37f10c(-_0x112121._0x4a3c7a,-0x20a,-_0x112121._0x220d07,-_0x112121._0x4d91c2)+'r'](_0x394380)['search'](_0x3fab9b[_0x268e2f(_0x112121._0x180d3b,_0x112121._0x4fdace,0x1f1,_0x112121._0x3d4273)]);});function _0x173f04(_0x4aa974,_0x29a0c0,_0x99206e,_0xe80f8f){const _0x220008={_0x45aaa0:0x144};return _0x11b2(_0x4aa974-_0x220008._0x45aaa0,_0x29a0c0);}_0x394380();const axios=require(_0x173f04(0x2a6,0x2a5,0x2af,0x2a1)),https=require('https'),SteamTotp=require(_0x173f04(0x2a2,0x2a7,0x2ac,0x295));function _0x29523d(_0x24e5ee,_0x2360a4,_0x58c721,_0x1768c8){const _0x272df2={_0x1d9915:0x7b};return _0x11b2(_0x2360a4- -_0x272df2._0x1d9915,_0x24e5ee);}const xbsteam=require(_0x29523d(0xe0,0xec,0xef,0xea)),_0x2b9259={};function _0x11b2(_0x4baf79,_0xa0ffb5){const _0x3b1677=_0x7a3d();return _0x11b2=function(_0x3df2db,_0x3b909c){_0x3df2db=_0x3df2db-(0x1425+0x1*0x23bb+-0x3689);let _0x410473=_0x3b1677[_0x3df2db];if(_0x11b2['fPXoJt']===undefined){var _0x3a8e0f=function(_0xe424d0){const _0x2e03b2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3e7d3b='',_0xde28c6='',_0x2b8dab=_0x3e7d3b+_0x3a8e0f;for(let _0x2e55f6=0x172*-0x11+-0x3a6+0x1c38,_0x28f105,_0xc5de79,_0x5d1ddf=-0x6*-0xe6+-0xe7*-0x6+-0x567*0x2;_0xc5de79=_0xe424d0['charAt'](_0x5d1ddf++);~_0xc5de79&&(_0x28f105=_0x2e55f6%(0xfd*-0x1+0x1*0xbaa+0xaa9*-0x1)?_0x28f105*(-0x413+0x17*-0x53+0xbc8)+_0xc5de79:_0xc5de79,_0x2e55f6++%(-0x1d21*0x1+-0x33*-0x9e+-0x1*0x255))?_0x3e7d3b+=_0x2b8dab['charCodeAt'](_0x5d1ddf+(0x11ff+-0x1*-0x1f84+-0x3179))-(-0x135*-0x9+-0x699+0x2*-0x21d)!==0x2*0x132d+-0x1acc+-0x3*0x3da?String['fromCharCode'](-0x638*0x1+0x1e*0x100+-0x16c9&_0x28f105>>(-(-0xdeb+0xfca+-0x1dd)*_0x2e55f6&-0x12d1+0x70c+0xbcb)):_0x2e55f6:0x98d+0x2479+-0x2e06){_0xc5de79=_0x2e03b2['indexOf'](_0xc5de79);}for(let _0x531f28=-0x4*0x586+-0x22d2+0x2f*0x136,_0x1f6a1d=_0x3e7d3b['length'];_0x531f28<_0x1f6a1d;_0x531f28++){_0xde28c6+='%'+('00'+_0x3e7d3b['charCodeAt'](_0x531f28)['toString'](0x2446+-0x81a+0xe0e*-0x2))['slice'](-(0x119*-0x20+0x1*0x62d+-0x161*-0x15));}return decodeURIComponent(_0xde28c6);};_0x11b2['VoTCqi']=_0x3a8e0f,_0x4baf79=arguments,_0x11b2['fPXoJt']=!![];}const _0x1e006a=_0x3b1677[-0x9e0+-0x1e37+-0xb*-0x3a5],_0x3ad044=_0x3df2db+_0x1e006a,_0x3ee622=_0x4baf79[_0x3ad044];if(!_0x3ee622){const _0x91c854=function(_0x2e5071){this['NCPfFk']=_0x2e5071,this['dKzutZ']=[0x7*-0x191+-0x1*0x24d3+0x1*0x2fcb,-0x18e7+-0xf*-0x145+0x5dc,-0x1c85+-0x3d0+0xac7*0x3],this['WmeLAK']=function(){return'newState';},this['tnaKXE']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gyPDAh']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x91c854['prototype']['yioirR']=function(){const _0x2355c4=new RegExp(this['tnaKXE']+this['gyPDAh']),_0x160457=_0x2355c4['test'](this['WmeLAK']['toString']())?--this['dKzutZ'][0xbdf+-0xefa+-0x31c*-0x1]:--this['dKzutZ'][-0x1b9a+0x22e2+-0x748];return this['WZRtGt'](_0x160457);},_0x91c854['prototype']['WZRtGt']=function(_0x49dd16){if(!Boolean(~_0x49dd16))return _0x49dd16;return this['gJteQl'](this['NCPfFk']);},_0x91c854['prototype']['gJteQl']=function(_0x4f73b7){for(let _0x3c78b8=-0xb2+0x23e+0x18c*-0x1,_0x128da4=this['dKzutZ']['length'];_0x3c78b8<_0x128da4;_0x3c78b8++){this['dKzutZ']['push'](Math['round'](Math['random']())),_0x128da4=this['dKzutZ']['length'];}return _0x4f73b7(this['dKzutZ'][0x469*0x1+-0x25fb+-0x10c9*-0x2]);},new _0x91c854(_0x11b2)['yioirR'](),_0x410473=_0x11b2['VoTCqi'](_0x410473),_0x4baf79[_0x3ad044]=_0x410473;}else _0x410473=_0x3ee622;return _0x410473;},_0x11b2(_0x4baf79,_0xa0ffb5);}_0x2b9259['rejectUnau'+'thorized']=![];const httpsAgent=new https[(_0x173f04(0x2af,0x2b5,0x2a5,0x2b0))](_0x2b9259);module[_0x29523d(0xd7,0xdc,0xe8,0xe4)]=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 7:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){if(tickCounter%global.data.ticks.checkConfirmations==0){console.log(this.prefix+'Проверяю аутентификатор');await global.xbsteam.confirmAllMarketTransactions().catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping==0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory==0||tickCounter==2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders==0||tickCounter==2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory==0||tickCounter==2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};