(function(_0x2011d6,_0x547ab6){const _0xc98726={_0x717ae8:0x370,_0xde4e72:0x366,_0x1bf0b2:0x360,_0x1cbf62:0x36c,_0x442618:0x2ad,_0x2a21d3:0x2a0,_0x53aeb9:0x2a1,_0x46d824:0x2af,_0x47d675:0x29b,_0x1e5334:0x293,_0x19a6f7:0x2a1,_0x34e756:0x297,_0x30c685:0x2ab,_0x258d4f:0x296,_0x5c1787:0x297,_0x42a60f:0x290,_0x2c51ad:0x292,_0x151f9e:0x298,_0x3debc5:0x2a5,_0x54879c:0x299,_0x3e7c89:0x294,_0x32893b:0x29e,_0x26c2ac:0x297,_0x4a7e75:0x353,_0x15640e:0x35e,_0x3ac77c:0x361,_0x1567cb:0x379,_0x48dd3e:0x36b,_0x4fb65a:0x364,_0x28ea15:0x358,_0xa63f7b:0x357,_0x169c62:0x35b,_0x31807c:0x2a4,_0x40d89c:0x299},_0x1b53f3={_0x3a02ba:0x299};function _0x458cb1(_0x534aa4,_0x1f155e,_0x259a47,_0x515dae){return _0x47c8(_0x1f155e-0x1d6,_0x534aa4);}function _0x500dea(_0x2da224,_0x501df4,_0x405707,_0x1c8bbc){return _0x47c8(_0x501df4-_0x1b53f3._0x3a02ba,_0x2da224);}const _0x1dbe92=_0x2011d6();while(!![]){try{const _0x117c77=parseInt(_0x500dea(_0xc98726._0x717ae8,_0xc98726._0xde4e72,_0xc98726._0x1bf0b2,_0xc98726._0x1cbf62))/(0x1*0x13e+-0x12df+0x11a2*0x1)*(-parseInt(_0x458cb1(_0xc98726._0x442618,0x2a4,_0xc98726._0x2a21d3,_0xc98726._0x53aeb9))/(0x293*-0xd+-0x29c+0x2415))+parseInt(_0x458cb1(_0xc98726._0x46d824,0x2a6,_0xc98726._0x47d675,0x2a7))/(-0x1e0d+0x36b+0x1aa5)*(-parseInt(_0x458cb1(_0xc98726._0x1e5334,_0xc98726._0x19a6f7,_0xc98726._0x34e756,_0xc98726._0x30c685))/(-0xbf*-0x3+0x15df+-0x1*0x1818))+-parseInt(_0x458cb1(0x297,_0xc98726._0x258d4f,_0xc98726._0x5c1787,_0xc98726._0x42a60f))/(0x1442+-0x1*-0xca3+0x8*-0x41c)*(-parseInt(_0x458cb1(_0xc98726._0x2c51ad,_0xc98726._0x151f9e,_0xc98726._0x3debc5,_0xc98726._0x54879c))/(0x1ac9*-0x1+-0x13d1+0x2ea0))+parseInt(_0x458cb1(_0xc98726._0x3e7c89,_0xc98726._0x32893b,_0xc98726._0x26c2ac,0x297))/(0x9b+0x74*0x2+-0x17c)+parseInt(_0x500dea(_0xc98726._0x4a7e75,_0xc98726._0x15640e,_0xc98726._0x3ac77c,0x356))/(-0x2488+-0x2371+0x4801*0x1)+parseInt(_0x500dea(0x369,0x36d,_0xc98726._0x1567cb,_0xc98726._0x48dd3e))/(0xe87+-0x1519+0x69b)+parseInt(_0x500dea(_0xc98726._0x4fb65a,_0xc98726._0x28ea15,_0xc98726._0xa63f7b,_0xc98726._0x169c62))/(-0x12ec+-0xe44+-0x1*-0x213a)*(-parseInt(_0x458cb1(_0xc98726._0x31807c,0x29a,_0xc98726._0x42a60f,_0xc98726._0x40d89c))/(-0x40a+-0x2043+0x8*0x48b));if(_0x117c77===_0x547ab6)break;else _0x1dbe92['push'](_0x1dbe92['shift']());}catch(_0x12ed2c){_0x1dbe92['push'](_0x1dbe92['shift']());}}}(_0xbefb,0xcec84+-0x28697*0x3+0x17556));function _0x47c8(_0xc0b1b8,_0x2d1a2d){const _0x1276ff=_0xbefb();return _0x47c8=function(_0x47ae59,_0x28c316){_0x47ae59=_0x47ae59-(0x205*0xd+0xed4+-0x2859);let _0x341d2f=_0x1276ff[_0x47ae59];if(_0x47c8['tEjPtO']===undefined){var _0x3aa2c0=function(_0x4213c5){const _0x1dfa5f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xa79e7f='',_0x49e7ae='',_0x34fc82=_0xa79e7f+_0x3aa2c0;for(let _0x8eaa35=-0x26*-0x85+-0x17*-0x6+-0x1448,_0x17cc7f,_0x2100e5,_0x4563ce=0x1be1+-0x19*0x3b+-0x161e;_0x2100e5=_0x4213c5['charAt'](_0x4563ce++);~_0x2100e5&&(_0x17cc7f=_0x8eaa35%(-0x1*0x14a9+0x19ff+-0x552)?_0x17cc7f*(-0x43*0x8d+0x1*-0x245f+0x4986)+_0x2100e5:_0x2100e5,_0x8eaa35++%(0x16e9+-0x31a+-0x13cb))?_0xa79e7f+=_0x34fc82['charCodeAt'](_0x4563ce+(0x156*-0x13+0xc46*0x2+0x7*0x20))-(0x1*-0x1703+-0x1*0x1d14+0x3421)!==0x13a5+-0x5*-0x37+-0x4e*0x44?String['fromCharCode'](0x5d2+0x85*-0x8+-0x3*0x39&_0x17cc7f>>(-(-0x1e6*-0x9+0xf*0x251+-0x33d3)*_0x8eaa35&-0x14*-0x1df+0xab*0x1+-0x2611)):_0x8eaa35:0x3*0x864+-0x4f*0xd+-0x1529){_0x2100e5=_0x1dfa5f['indexOf'](_0x2100e5);}for(let _0x267d47=-0x6*0x4b7+0x21c1+-0x1*0x577,_0x589325=_0xa79e7f['length'];_0x267d47<_0x589325;_0x267d47++){_0x49e7ae+='%'+('00'+_0xa79e7f['charCodeAt'](_0x267d47)['toString'](-0xc8d+-0xf62+0x1bff))['slice'](-(0x199f+0x1*-0x1501+-0x1*0x49c));}return decodeURIComponent(_0x49e7ae);};_0x47c8['njVfbj']=_0x3aa2c0,_0xc0b1b8=arguments,_0x47c8['tEjPtO']=!![];}const _0x4839fe=_0x1276ff[-0xb78+0x23ad*-0x1+-0x9*-0x53d],_0x3541fc=_0x47ae59+_0x4839fe,_0x5c8682=_0xc0b1b8[_0x3541fc];if(!_0x5c8682){const _0x51e836=function(_0x45da58){this['IxsJCU']=_0x45da58,this['iPmJxR']=[0x14ae+0x1*-0x1be9+-0x1*-0x73c,0x2*0x5bb+0x1abb+0xcbb*-0x3,-0xfc9*0x1+-0x3*0x522+-0x1*-0x1f2f],this['unAKxF']=function(){return'newState';},this['oqSQde']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['VnWbgZ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x51e836['prototype']['zQdCHp']=function(){const _0x394a96=new RegExp(this['oqSQde']+this['VnWbgZ']),_0x1d4f8b=_0x394a96['test'](this['unAKxF']['toString']())?--this['iPmJxR'][0x34f+0x1327+0x1*-0x1675]:--this['iPmJxR'][0x1*-0x13e2+0x531*-0x4+-0x1d9*-0x16];return this['rCCUlw'](_0x1d4f8b);},_0x51e836['prototype']['rCCUlw']=function(_0x29cc05){if(!Boolean(~_0x29cc05))return _0x29cc05;return this['RaqiQB'](this['IxsJCU']);},_0x51e836['prototype']['RaqiQB']=function(_0x11180c){for(let _0x2d9e9a=-0x1c72+0x21ea+0x1*-0x578,_0x25fb07=this['iPmJxR']['length'];_0x2d9e9a<_0x25fb07;_0x2d9e9a++){this['iPmJxR']['push'](Math['round'](Math['random']())),_0x25fb07=this['iPmJxR']['length'];}return _0x11180c(this['iPmJxR'][0x1c7d*0x1+0x521+-0x219e]);},new _0x51e836(_0x47c8)['zQdCHp'](),_0x341d2f=_0x47c8['njVfbj'](_0x341d2f),_0xc0b1b8[_0x3541fc]=_0x341d2f;}else _0x341d2f=_0x5c8682;return _0x341d2f;},_0x47c8(_0xc0b1b8,_0x2d1a2d);}function _0xbefb(){const _0x102ae2=['DgHVCML6zwq','mJjyrLn6rLm','nty1mdu5mNfVqw5TyW','kcGOlISPkYKRkq','yxbWBhK','mZy1ntG1nuTWq0LqsG','yxHPB3m','Ahr0Chm','ndm2nJHrCwT4Bfy','C2vHCMnO','ntiZndjzs0zUqK0','mJHbBevfzKq','DfjitfC','ntr4CLjos0S','zxHWB3j0CW','CMvQzwn0vw5HDq','Dg9tDhjPBMC','nZy3odm1oxvxy1rJsa','C3rLyw0TDg90Ca','y29UC3rYDwn0BW','qwDLBNq','lI9ZDgvHBq','r3zhve8','ndCXmJe0mhfgtLbwyW','mJvny3juzNu','ywXcrgO','mJGZmtq2sM9WAKHW'];_0xbefb=function(){return _0x102ae2;};return _0xbefb();}const _0x165f53=(function(){const _0x29a26b={_0x3731f4:0x2ed,_0x2bb1e3:0x2e5,_0x478add:0x2dd,_0x2067e5:0x2e7,_0x12ca65:0x302,_0x3768e3:0x304,_0x2087fd:0x2f8},_0x28aae9={_0x5bc935:0x229},_0x100348={_0x42b06c:0x217},_0x472b1b={};_0x472b1b[_0x403b3d(_0x29a26b._0x3731f4,_0x29a26b._0x2bb1e3,_0x29a26b._0x478add,_0x29a26b._0x2067e5)]=function(_0xc7a8c5,_0x275003){return _0xc7a8c5!==_0x275003;};function _0x1c6804(_0x4e6ed5,_0x17cd5f,_0x4c3fe1,_0x44bad0){return _0x47c8(_0x4c3fe1- -_0x100348._0x42b06c,_0x4e6ed5);}_0x472b1b[_0x403b3d(0x304,_0x29a26b._0x12ca65,_0x29a26b._0x3768e3,_0x29a26b._0x2087fd)]='yviry';const _0x3d41e2=_0x472b1b;function _0x403b3d(_0x1a5015,_0x11d96d,_0x2b939e,_0x29ab0f){return _0x47c8(_0x29ab0f-_0x28aae9._0x5bc935,_0x1a5015);}let _0x540ee3=!![];return function(_0x1d3f05,_0x25837a){const _0x390056={_0x187051:0x39c,_0x35eeb3:0x3a4,_0xac0f3d:0x3a3,_0x5f5d63:0x3ab,_0x57043d:0x3b7,_0xf5ec0f:0x3b5,_0x272db7:0x265,_0x2412e6:0x25d,_0x5b0255:0x252,_0x31b9da:0x260,_0x4bf728:0x254},_0x22dc66=_0x540ee3?function(){const _0x5579dc={_0x4b5714:0x196};function _0x1e74a2(_0x4b3ab4,_0x4430ff,_0x256ab9,_0x317b70){return _0x47c8(_0x317b70-0x2e6,_0x256ab9);}function _0x5cd89c(_0x5bef7f,_0x540a58,_0x5ba515,_0x352d13){return _0x47c8(_0x5bef7f-_0x5579dc._0x4b5714,_0x540a58);}if(_0x3d41e2[_0x1e74a2(_0x390056._0x187051,_0x390056._0x35eeb3,_0x390056._0xac0f3d,_0x390056._0x35eeb3)](_0x3d41e2[_0x1e74a2(0x3b7,_0x390056._0x5f5d63,_0x390056._0x57043d,_0x390056._0xf5ec0f)],_0x3d41e2[_0x5cd89c(_0x390056._0x272db7,0x26e,_0x390056._0x272db7,0x25b)]))_0xf5ed6c.log(_0x9223e2),_0x5647c4.log('Произошла ошибка при отправке лога ');else{if(_0x25837a){const _0x43d16e=_0x25837a[_0x5cd89c(_0x390056._0x2412e6,_0x390056._0x5b0255,_0x390056._0x31b9da,_0x390056._0x4bf728)](_0x1d3f05,arguments);return _0x25837a=null,_0x43d16e;}}}:function(){};return _0x540ee3=![],_0x22dc66;};}()),_0x510d81=_0x165f53(this,function(){const _0x38df0a={_0x2d52e8:0x25,_0x172d51:0x22,_0x3608e6:0x29,_0x46490d:0x2b,_0x582253:0x22,_0x42f50e:0x1d,_0x55cb60:0x19,_0x72f353:0x13d,_0xebc8c8:0x144,_0x10a1e3:0x13c,_0x20ef4d:0x15a,_0x2d8fa9:0x157,_0x4dbf1c:0x4,_0x4d49af:0x7,_0x49cbe5:0x15,_0xc2486a:0x130,_0x45bba4:0x13a,_0x15081a:0x12d,_0x591cc5:0x13b,_0x19a050:0x144,_0xc588d6:0x14c,_0x7361a5:0x142,_0x56a216:0x2a,_0x2398ae:0x20,_0x5bcbe0:0x23},_0x118c51={_0x1ed03a:0x210},_0x38f0ba={_0x547b83:0xe3},_0x32f91a={};_0x32f91a[_0x112749(-_0x38df0a._0x2d52e8,-_0x38df0a._0x172d51,-_0x38df0a._0x3608e6,-_0x38df0a._0x46490d)]=_0x112749(-_0x38df0a._0x582253,-0x1d,-_0x38df0a._0x42f50e,-_0x38df0a._0x55cb60)+'+$';function _0x112749(_0x1caf15,_0x303cee,_0x399dac,_0x49795e){return _0x47c8(_0x303cee- -_0x38f0ba._0x547b83,_0x1caf15);}const _0x462c6e=_0x32f91a;function _0x1a3808(_0x4dcbcb,_0x1e7c66,_0x22cb01,_0x287ef7){return _0x47c8(_0x1e7c66- -_0x118c51._0x1ed03a,_0x22cb01);}return _0x510d81['toString']()[_0x1a3808(-_0x38df0a._0x72f353,-_0x38df0a._0xebc8c8,-_0x38df0a._0x10a1e3,-0x146)](_0x462c6e[_0x1a3808(-_0x38df0a._0x20ef4d,-0x14f,-0x152,-_0x38df0a._0x2d8fa9)])[_0x112749(-_0x38df0a._0x4dbf1c,-0x10,-_0x38df0a._0x4d49af,-_0x38df0a._0x49cbe5)]()[_0x1a3808(-_0x38df0a._0xc2486a,-0x13a,-_0x38df0a._0x45bba4,-_0x38df0a._0x15081a)+'r'](_0x510d81)[_0x1a3808(-_0x38df0a._0x591cc5,-_0x38df0a._0x19a050,-_0x38df0a._0xc588d6,-_0x38df0a._0x7361a5)](_0x462c6e[_0x112749(-_0x38df0a._0x56a216,-0x22,-_0x38df0a._0x2398ae,-_0x38df0a._0x5bcbe0)]);});function _0x237cc7(_0x1a1abf,_0x51fb55,_0x16cdeb,_0xf352a4){const _0x4954c5={_0x158b13:0x80};return _0x47c8(_0x51fb55-_0x4954c5._0x158b13,_0x16cdeb);}function _0x5b4256(_0x323196,_0x91d6a9,_0x1c7c72,_0x2963c1){const _0x3552f5={_0x5c99f5:0x1db};return _0x47c8(_0x91d6a9- -_0x3552f5._0x5c99f5,_0x323196);}_0x510d81();const axios=require(_0x5b4256(-0x10a,-0x112,-0x11f,-0x105)),https=require(_0x237cc7(0x145,0x14a,0x146,0x142)),SteamTotp=require(_0x5b4256(-0x113,-0x106,-0x108,-0x114)),xbsteam=require(_0x5b4256(-0x11f,-0x11e,-0x123,-0x124)),_0x51fffd={};_0x51fffd[_0x237cc7(0x14c,0x152,0x153,0x151)+_0x237cc7(0x143,0x143,0x145,0x13d)]=![];const httpsAgent=new https[(_0x5b4256(-0x121,-0x11f,-0x122,-0x113))](_0x51fffd);module[_0x5b4256(-0x10b,-0x10a,-0x107,-0x105)]=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 7:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){if(tickCounter%global.data.ticks.checkConfirmations==0){console.log(this.prefix+'Проверяю аутентификатор');await global.xbsteam.confirmAllMarketTransactions().catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping==0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory==0||tickCounter==2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders==0||tickCounter==2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory==0||tickCounter==2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};